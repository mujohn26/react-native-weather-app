1ba32977b72b37b1736370f322a45534
var Tokenizer = require("./Tokenizer.js");

var formTags = {
  input: true,
  option: true,
  optgroup: true,
  select: true,
  button: true,
  datalist: true,
  textarea: true
};
var openImpliesClose = {
  tr: {
    tr: true,
    th: true,
    td: true
  },
  th: {
    th: true
  },
  td: {
    thead: true,
    th: true,
    td: true
  },
  body: {
    head: true,
    link: true,
    script: true
  },
  li: {
    li: true
  },
  p: {
    p: true
  },
  h1: {
    p: true
  },
  h2: {
    p: true
  },
  h3: {
    p: true
  },
  h4: {
    p: true
  },
  h5: {
    p: true
  },
  h6: {
    p: true
  },
  select: formTags,
  input: formTags,
  output: formTags,
  button: formTags,
  datalist: formTags,
  textarea: formTags,
  option: {
    option: true
  },
  optgroup: {
    optgroup: true
  }
};
var voidElements = {
  __proto__: null,
  area: true,
  base: true,
  basefont: true,
  br: true,
  col: true,
  command: true,
  embed: true,
  frame: true,
  hr: true,
  img: true,
  input: true,
  isindex: true,
  keygen: true,
  link: true,
  meta: true,
  param: true,
  source: true,
  track: true,
  wbr: true
};
var foreignContextElements = {
  __proto__: null,
  math: true,
  svg: true
};
var htmlIntegrationElements = {
  __proto__: null,
  mi: true,
  mo: true,
  mn: true,
  ms: true,
  mtext: true,
  "annotation-xml": true,
  foreignObject: true,
  desc: true,
  title: true
};
var re_nameEnd = /\s|\//;

function Parser(cbs, options) {
  this._options = options || {};
  this._cbs = cbs || {};
  this._tagname = "";
  this._attribname = "";
  this._attribvalue = "";
  this._attribs = null;
  this._stack = [];
  this._foreignContext = [];
  this.startIndex = 0;
  this.endIndex = null;
  this._lowerCaseTagNames = "lowerCaseTags" in this._options ? !!this._options.lowerCaseTags : !this._options.xmlMode;
  this._lowerCaseAttributeNames = "lowerCaseAttributeNames" in this._options ? !!this._options.lowerCaseAttributeNames : !this._options.xmlMode;

  if (this._options.Tokenizer) {
    Tokenizer = this._options.Tokenizer;
  }

  this._tokenizer = new Tokenizer(this._options, this);
  if (this._cbs.onparserinit) this._cbs.onparserinit(this);
}

require("inherits")(Parser, require("events").EventEmitter);

Parser.prototype._updatePosition = function (initialOffset) {
  if (this.endIndex === null) {
    if (this._tokenizer._sectionStart <= initialOffset) {
      this.startIndex = 0;
    } else {
      this.startIndex = this._tokenizer._sectionStart - initialOffset;
    }
  } else this.startIndex = this.endIndex + 1;

  this.endIndex = this._tokenizer.getAbsoluteIndex();
};

Parser.prototype.ontext = function (data) {
  this._updatePosition(1);

  this.endIndex--;
  if (this._cbs.ontext) this._cbs.ontext(data);
};

Parser.prototype.onopentagname = function (name) {
  if (this._lowerCaseTagNames) {
    name = name.toLowerCase();
  }

  this._tagname = name;

  if (!this._options.xmlMode && name in openImpliesClose) {
    for (var el; ((el = this._stack[this._stack.length - 1]) in openImpliesClose[name]); this.onclosetag(el)) {
      ;
    }
  }

  if (this._options.xmlMode || !(name in voidElements)) {
    this._stack.push(name);

    if (name in foreignContextElements) this._foreignContext.push(true);else if (name in htmlIntegrationElements) this._foreignContext.push(false);
  }

  if (this._cbs.onopentagname) this._cbs.onopentagname(name);
  if (this._cbs.onopentag) this._attribs = {};
};

Parser.prototype.onopentagend = function () {
  this._updatePosition(1);

  if (this._attribs) {
    if (this._cbs.onopentag) this._cbs.onopentag(this._tagname, this._attribs);
    this._attribs = null;
  }

  if (!this._options.xmlMode && this._cbs.onclosetag && this._tagname in voidElements) {
    this._cbs.onclosetag(this._tagname);
  }

  this._tagname = "";
};

Parser.prototype.onclosetag = function (name) {
  this._updatePosition(1);

  if (this._lowerCaseTagNames) {
    name = name.toLowerCase();
  }

  if (name in foreignContextElements || name in htmlIntegrationElements) {
    this._foreignContext.pop();
  }

  if (this._stack.length && (!(name in voidElements) || this._options.xmlMode)) {
    var pos = this._stack.lastIndexOf(name);

    if (pos !== -1) {
      if (this._cbs.onclosetag) {
        pos = this._stack.length - pos;

        while (pos--) {
          this._cbs.onclosetag(this._stack.pop());
        }
      } else this._stack.length = pos;
    } else if (name === "p" && !this._options.xmlMode) {
      this.onopentagname(name);

      this._closeCurrentTag();
    }
  } else if (!this._options.xmlMode && (name === "br" || name === "p")) {
    this.onopentagname(name);

    this._closeCurrentTag();
  }
};

Parser.prototype.onselfclosingtag = function () {
  if (this._options.xmlMode || this._options.recognizeSelfClosing || this._foreignContext[this._foreignContext.length - 1]) {
    this._closeCurrentTag();
  } else {
    this.onopentagend();
  }
};

Parser.prototype._closeCurrentTag = function () {
  var name = this._tagname;
  this.onopentagend();

  if (this._stack[this._stack.length - 1] === name) {
    if (this._cbs.onclosetag) {
      this._cbs.onclosetag(name);
    }

    this._stack.pop();
  }
};

Parser.prototype.onattribname = function (name) {
  if (this._lowerCaseAttributeNames) {
    name = name.toLowerCase();
  }

  this._attribname = name;
};

Parser.prototype.onattribdata = function (value) {
  this._attribvalue += value;
};

Parser.prototype.onattribend = function () {
  if (this._cbs.onattribute) this._cbs.onattribute(this._attribname, this._attribvalue);

  if (this._attribs && !Object.prototype.hasOwnProperty.call(this._attribs, this._attribname)) {
    this._attribs[this._attribname] = this._attribvalue;
  }

  this._attribname = "";
  this._attribvalue = "";
};

Parser.prototype._getInstructionName = function (value) {
  var idx = value.search(re_nameEnd),
      name = idx < 0 ? value : value.substr(0, idx);

  if (this._lowerCaseTagNames) {
    name = name.toLowerCase();
  }

  return name;
};

Parser.prototype.ondeclaration = function (value) {
  if (this._cbs.onprocessinginstruction) {
    var name = this._getInstructionName(value);

    this._cbs.onprocessinginstruction("!" + name, "!" + value);
  }
};

Parser.prototype.onprocessinginstruction = function (value) {
  if (this._cbs.onprocessinginstruction) {
    var name = this._getInstructionName(value);

    this._cbs.onprocessinginstruction("?" + name, "?" + value);
  }
};

Parser.prototype.oncomment = function (value) {
  this._updatePosition(4);

  if (this._cbs.oncomment) this._cbs.oncomment(value);
  if (this._cbs.oncommentend) this._cbs.oncommentend();
};

Parser.prototype.oncdata = function (value) {
  this._updatePosition(1);

  if (this._options.xmlMode || this._options.recognizeCDATA) {
    if (this._cbs.oncdatastart) this._cbs.oncdatastart();
    if (this._cbs.ontext) this._cbs.ontext(value);
    if (this._cbs.oncdataend) this._cbs.oncdataend();
  } else {
    this.oncomment("[CDATA[" + value + "]]");
  }
};

Parser.prototype.onerror = function (err) {
  if (this._cbs.onerror) this._cbs.onerror(err);
};

Parser.prototype.onend = function () {
  if (this._cbs.onclosetag) {
    for (var i = this._stack.length; i > 0; this._cbs.onclosetag(this._stack[--i])) {
      ;
    }
  }

  if (this._cbs.onend) this._cbs.onend();
};

Parser.prototype.reset = function () {
  if (this._cbs.onreset) this._cbs.onreset();

  this._tokenizer.reset();

  this._tagname = "";
  this._attribname = "";
  this._attribs = null;
  this._stack = [];
  if (this._cbs.onparserinit) this._cbs.onparserinit(this);
};

Parser.prototype.parseComplete = function (data) {
  this.reset();
  this.end(data);
};

Parser.prototype.write = function (chunk) {
  this._tokenizer.write(chunk);
};

Parser.prototype.end = function (chunk) {
  this._tokenizer.end(chunk);
};

Parser.prototype.pause = function () {
  this._tokenizer.pause();
};

Parser.prototype.resume = function () {
  this._tokenizer.resume();
};

Parser.prototype.parseChunk = Parser.prototype.write;
Parser.prototype.done = Parser.prototype.end;
module.exports = Parser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBhcnNlci5qcyJdLCJuYW1lcyI6WyJUb2tlbml6ZXIiLCJyZXF1aXJlIiwiZm9ybVRhZ3MiLCJpbnB1dCIsIm9wdGlvbiIsIm9wdGdyb3VwIiwic2VsZWN0IiwiYnV0dG9uIiwiZGF0YWxpc3QiLCJ0ZXh0YXJlYSIsIm9wZW5JbXBsaWVzQ2xvc2UiLCJ0ciIsInRoIiwidGQiLCJ0aGVhZCIsImJvZHkiLCJoZWFkIiwibGluayIsInNjcmlwdCIsImxpIiwicCIsImgxIiwiaDIiLCJoMyIsImg0IiwiaDUiLCJoNiIsIm91dHB1dCIsInZvaWRFbGVtZW50cyIsIl9fcHJvdG9fXyIsImFyZWEiLCJiYXNlIiwiYmFzZWZvbnQiLCJiciIsImNvbCIsImNvbW1hbmQiLCJlbWJlZCIsImZyYW1lIiwiaHIiLCJpbWciLCJpc2luZGV4Iiwia2V5Z2VuIiwibWV0YSIsInBhcmFtIiwic291cmNlIiwidHJhY2siLCJ3YnIiLCJmb3JlaWduQ29udGV4dEVsZW1lbnRzIiwibWF0aCIsInN2ZyIsImh0bWxJbnRlZ3JhdGlvbkVsZW1lbnRzIiwibWkiLCJtbyIsIm1uIiwibXMiLCJtdGV4dCIsImZvcmVpZ25PYmplY3QiLCJkZXNjIiwidGl0bGUiLCJyZV9uYW1lRW5kIiwiUGFyc2VyIiwiY2JzIiwib3B0aW9ucyIsIl9vcHRpb25zIiwiX2NicyIsIl90YWduYW1lIiwiX2F0dHJpYm5hbWUiLCJfYXR0cmlidmFsdWUiLCJfYXR0cmlicyIsIl9zdGFjayIsIl9mb3JlaWduQ29udGV4dCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsIl9sb3dlckNhc2VUYWdOYW1lcyIsImxvd2VyQ2FzZVRhZ3MiLCJ4bWxNb2RlIiwiX2xvd2VyQ2FzZUF0dHJpYnV0ZU5hbWVzIiwibG93ZXJDYXNlQXR0cmlidXRlTmFtZXMiLCJfdG9rZW5pemVyIiwib25wYXJzZXJpbml0IiwiRXZlbnRFbWl0dGVyIiwicHJvdG90eXBlIiwiX3VwZGF0ZVBvc2l0aW9uIiwiaW5pdGlhbE9mZnNldCIsIl9zZWN0aW9uU3RhcnQiLCJnZXRBYnNvbHV0ZUluZGV4Iiwib250ZXh0IiwiZGF0YSIsIm9ub3BlbnRhZ25hbWUiLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJlbCIsImxlbmd0aCIsIm9uY2xvc2V0YWciLCJwdXNoIiwib25vcGVudGFnIiwib25vcGVudGFnZW5kIiwicG9wIiwicG9zIiwibGFzdEluZGV4T2YiLCJfY2xvc2VDdXJyZW50VGFnIiwib25zZWxmY2xvc2luZ3RhZyIsInJlY29nbml6ZVNlbGZDbG9zaW5nIiwib25hdHRyaWJuYW1lIiwib25hdHRyaWJkYXRhIiwidmFsdWUiLCJvbmF0dHJpYmVuZCIsIm9uYXR0cmlidXRlIiwiT2JqZWN0IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiX2dldEluc3RydWN0aW9uTmFtZSIsImlkeCIsInNlYXJjaCIsInN1YnN0ciIsIm9uZGVjbGFyYXRpb24iLCJvbnByb2Nlc3NpbmdpbnN0cnVjdGlvbiIsIm9uY29tbWVudCIsIm9uY29tbWVudGVuZCIsIm9uY2RhdGEiLCJyZWNvZ25pemVDREFUQSIsIm9uY2RhdGFzdGFydCIsIm9uY2RhdGFlbmQiLCJvbmVycm9yIiwiZXJyIiwib25lbmQiLCJpIiwicmVzZXQiLCJvbnJlc2V0IiwicGFyc2VDb21wbGV0ZSIsImVuZCIsIndyaXRlIiwiY2h1bmsiLCJwYXVzZSIsInJlc3VtZSIsInBhcnNlQ2h1bmsiLCJkb25lIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsU0FBUyxHQUFHQyxPQUFPLGtCQUF2Qjs7QUF5QkEsSUFBSUMsUUFBUSxHQUFHO0FBQ1hDLEVBQUFBLEtBQUssRUFBRSxJQURJO0FBRVhDLEVBQUFBLE1BQU0sRUFBRSxJQUZHO0FBR1hDLEVBQUFBLFFBQVEsRUFBRSxJQUhDO0FBSVhDLEVBQUFBLE1BQU0sRUFBRSxJQUpHO0FBS1hDLEVBQUFBLE1BQU0sRUFBRSxJQUxHO0FBTVhDLEVBQUFBLFFBQVEsRUFBRSxJQU5DO0FBT1hDLEVBQUFBLFFBQVEsRUFBRTtBQVBDLENB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cEI7QUFDSCxDQUZEOztBQUlBeEUsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQm9ELEtBQWpCLEdBQXlCLFlBQVc7QUFDaEMsT0FBS3ZELFVBQUwsQ0FBZ0J1RCxLQUFoQjtBQUNILENBRkQ7O0FBSUF6RSxNQUFNLENBQUNxQixTQUFQLENBQWlCcUQsTUFBakIsR0FBMEIsWUFBVztBQUNqQyxPQUFLeEQsVUFBTCxDQUFnQndELE1BQWhCO0FBQ0gsQ0FGRDs7QUFLQTFFLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUJzRCxVQUFqQixHQUE4QjNFLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUJrRCxLQUEvQztBQUNBdkUsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQnVELElBQWpCLEdBQXdCNUUsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQmlELEdBQXpDO0FBRUFPLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjlFLE1BQWpCIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFRva2VuaXplciA9IHJlcXVpcmUoXCIuL1Rva2VuaXplci5qc1wiKTtcblxuLypcblx0T3B0aW9uczpcblxuXHR4bWxNb2RlOiBEaXNhYmxlcyB0aGUgc3BlY2lhbCBiZWhhdmlvciBmb3Igc2NyaXB0L3N0eWxlIHRhZ3MgKGZhbHNlIGJ5IGRlZmF1bHQpXG5cdGxvd2VyQ2FzZUF0dHJpYnV0ZU5hbWVzOiBjYWxsIC50b0xvd2VyQ2FzZSBmb3IgZWFjaCBhdHRyaWJ1dGUgbmFtZSAodHJ1ZSBpZiB4bWxNb2RlIGlzIGBmYWxzZWApXG5cdGxvd2VyQ2FzZVRhZ3M6IGNhbGwgLnRvTG93ZXJDYXNlIGZvciBlYWNoIHRhZyBuYW1lICh0cnVlIGlmIHhtbE1vZGUgaXMgYGZhbHNlYClcbiovXG5cbi8qXG5cdENhbGxiYWNrczpcblxuXHRvbmNkYXRhZW5kLFxuXHRvbmNkYXRhc3RhcnQsXG5cdG9uY2xvc2V0YWcsXG5cdG9uY29tbWVudCxcblx0b25jb21tZW50ZW5kLFxuXHRvbmVycm9yLFxuXHRvbm9wZW50YWcsXG5cdG9ucHJvY2Vzc2luZ2luc3RydWN0aW9uLFxuXHRvbnJlc2V0LFxuXHRvbnRleHRcbiovXG5cbnZhciBmb3JtVGFncyA9IHtcbiAgICBpbnB1dDogdHJ1ZSxcbiAgICBvcHRpb246IHRydWUsXG4gICAgb3B0Z3JvdXA6IHRydWUsXG4gICAgc2VsZWN0OiB0cnVlLFxuICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICBkYXRhbGlzdDogdHJ1ZSxcbiAgICB0ZXh0YXJlYTogdHJ1ZVxufTtcblxudmFyIG9wZW5JbXBsaWVzQ2xvc2UgPSB7XG4gICAgdHI6IHsgdHI6IHRydWUsIHRoOiB0cnVlLCB0ZDogdHJ1ZSB9LFxuICAgIHRoOiB7IHRoOiB0cnVlIH0sXG4gICAgdGQ6IHsgdGhlYWQ6IHRydWUsIHRoOiB0cnVlLCB0ZDogdHJ1ZSB9LFxuICAgIGJvZHk6IHsgaGVhZDogdHJ1ZSwgbGluazogdHJ1ZSwgc2NyaXB0OiB0cnVlIH0sXG4gICAgbGk6IHsgbGk6IHRydWUgfSxcbiAgICBwOiB7IHA6IHRydWUgfSxcbiAgICBoMTogeyBwOiB0cnVlIH0sXG4gICAgaDI6IHsgcDogdHJ1ZSB9LFxuICAgIGgzOiB7IHA6IHRydWUgfSxcbiAgICBoNDogeyBwOiB0cnVlIH0sXG4gICAgaDU6IHsgcDogdHJ1ZSB9LFxuICAgIGg2OiB7IHA6IHRydWUgfSxcbiAgICBzZWxlY3Q6IGZvcm1UYWdzLFxuICAgIGlucHV0OiBmb3JtVGFncyxcbiAgICBvdXRwdXQ6IGZvcm1UYWdzLFxuICAgIGJ1dHRvbjogZm9ybVRhZ3MsXG4gICAgZGF0YWxpc3Q6IGZvcm1UYWdzLFxuICAgIHRleHRhcmVhOiBmb3JtVGFncyxcbiAgICBvcHRpb246IHsgb3B0aW9uOiB0cnVlIH0sXG4gICAgb3B0Z3JvdXA6IHsgb3B0Z3JvdXA6IHRydWUgfVxufTtcblxudmFyIHZvaWRFbGVtZW50cyA9IHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgYXJlYTogdHJ1ZSxcbiAgICBiYXNlOiB0cnVlLFxuICAgIGJhc2Vmb250OiB0cnVlLFxuICAgIGJyOiB0cnVlLFxuICAgIGNvbDogdHJ1ZSxcbiAgICBjb21tYW5kOiB0cnVlLFxuICAgIGVtYmVkOiB0cnVlLFxuICAgIGZyYW1lOiB0cnVlLFxuICAgIGhyOiB0cnVlLFxuICAgIGltZzogdHJ1ZSxcbiAgICBpbnB1dDogdHJ1ZSxcbiAgICBpc2luZGV4OiB0cnVlLFxuICAgIGtleWdlbjogdHJ1ZSxcbiAgICBsaW5rOiB0cnVlLFxuICAgIG1ldGE6IHRydWUsXG4gICAgcGFyYW06IHRydWUsXG4gICAgc291cmNlOiB0cnVlLFxuICAgIHRyYWNrOiB0cnVlLFxuICAgIHdicjogdHJ1ZVxufTtcblxudmFyIGZvcmVpZ25Db250ZXh0RWxlbWVudHMgPSB7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgIG1hdGg6IHRydWUsXG4gICAgc3ZnOiB0cnVlXG59O1xudmFyIGh0bWxJbnRlZ3JhdGlvbkVsZW1lbnRzID0ge1xuICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICBtaTogdHJ1ZSxcbiAgICBtbzogdHJ1ZSxcbiAgICBtbjogdHJ1ZSxcbiAgICBtczogdHJ1ZSxcbiAgICBtdGV4dDogdHJ1ZSxcbiAgICBcImFubm90YXRpb24teG1sXCI6IHRydWUsXG4gICAgZm9yZWlnbk9iamVjdDogdHJ1ZSxcbiAgICBkZXNjOiB0cnVlLFxuICAgIHRpdGxlOiB0cnVlXG59O1xuXG52YXIgcmVfbmFtZUVuZCA9IC9cXHN8XFwvLztcblxuZnVuY3Rpb24gUGFyc2VyKGNicywgb3B0aW9ucykge1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuX2NicyA9IGNicyB8fCB7fTtcblxuICAgIHRoaXMuX3RhZ25hbWUgPSBcIlwiO1xuICAgIHRoaXMuX2F0dHJpYm5hbWUgPSBcIlwiO1xuICAgIHRoaXMuX2F0dHJpYnZhbHVlID0gXCJcIjtcbiAgICB0aGlzLl9hdHRyaWJzID0gbnVsbDtcbiAgICB0aGlzLl9zdGFjayA9IFtdO1xuICAgIHRoaXMuX2ZvcmVpZ25Db250ZXh0ID0gW107XG5cbiAgICB0aGlzLnN0YXJ0SW5kZXggPSAwO1xuICAgIHRoaXMuZW5kSW5kZXggPSBudWxsO1xuXG4gICAgdGhpcy5fbG93ZXJDYXNlVGFnTmFtZXMgPVxuICAgICAgICBcImxvd2VyQ2FzZVRhZ3NcIiBpbiB0aGlzLl9vcHRpb25zXG4gICAgICAgICAgICA/ICEhdGhpcy5fb3B0aW9ucy5sb3dlckNhc2VUYWdzXG4gICAgICAgICAgICA6ICF0aGlzLl9vcHRpb25zLnhtbE1vZGU7XG4gICAgdGhpcy5fbG93ZXJDYXNlQXR0cmlidXRlTmFtZXMgPVxuICAgICAgICBcImxvd2VyQ2FzZUF0dHJpYnV0ZU5hbWVzXCIgaW4gdGhpcy5fb3B0aW9uc1xuICAgICAgICAgICAgPyAhIXRoaXMuX29wdGlvbnMubG93ZXJDYXNlQXR0cmlidXRlTmFtZXNcbiAgICAgICAgICAgIDogIXRoaXMuX29wdGlvbnMueG1sTW9kZTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLlRva2VuaXplcikge1xuICAgICAgICBUb2tlbml6ZXIgPSB0aGlzLl9vcHRpb25zLlRva2VuaXplcjtcbiAgICB9XG4gICAgdGhpcy5fdG9rZW5pemVyID0gbmV3IFRva2VuaXplcih0aGlzLl9vcHRpb25zLCB0aGlzKTtcblxuICAgIGlmICh0aGlzLl9jYnMub25wYXJzZXJpbml0KSB0aGlzLl9jYnMub25wYXJzZXJpbml0KHRoaXMpO1xufVxuXG5yZXF1aXJlKFwiaW5oZXJpdHNcIikoUGFyc2VyLCByZXF1aXJlKFwiZXZlbnRzXCIpLkV2ZW50RW1pdHRlcik7XG5cblBhcnNlci5wcm90b3R5cGUuX3VwZGF0ZVBvc2l0aW9uID0gZnVuY3Rpb24oaW5pdGlhbE9mZnNldCkge1xuICAgIGlmICh0aGlzLmVuZEluZGV4ID09PSBudWxsKSB7XG4gICAgICAgIGlmICh0aGlzLl90b2tlbml6ZXIuX3NlY3Rpb25TdGFydCA8PSBpbml0aWFsT2Zmc2V0KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0SW5kZXggPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFydEluZGV4ID0gdGhpcy5fdG9rZW5pemVyLl9zZWN0aW9uU3RhcnQgLSBpbml0aWFsT2Zmc2V0O1xuICAgICAgICB9XG4gICAgfSBlbHNlIHRoaXMuc3RhcnRJbmRleCA9IHRoaXMuZW5kSW5kZXggKyAxO1xuICAgIHRoaXMuZW5kSW5kZXggPSB0aGlzLl90b2tlbml6ZXIuZ2V0QWJzb2x1dGVJbmRleCgpO1xufTtcblxuLy9Ub2tlbml6ZXIgZXZlbnQgaGFuZGxlcnNcblBhcnNlci5wcm90b3R5cGUub250ZXh0ID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHRoaXMuX3VwZGF0ZVBvc2l0aW9uKDEpO1xuICAgIHRoaXMuZW5kSW5kZXgtLTtcblxuICAgIGlmICh0aGlzLl9jYnMub250ZXh0KSB0aGlzLl9jYnMub250ZXh0KGRhdGEpO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbm9wZW50YWduYW1lID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGlmICh0aGlzLl9sb3dlckNhc2VUYWdOYW1lcykge1xuICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX3RhZ25hbWUgPSBuYW1lO1xuXG4gICAgaWYgKCF0aGlzLl9vcHRpb25zLnhtbE1vZGUgJiYgbmFtZSBpbiBvcGVuSW1wbGllc0Nsb3NlKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgICB2YXIgZWw7XG4gICAgICAgICAgICAoZWwgPSB0aGlzLl9zdGFja1t0aGlzLl9zdGFjay5sZW5ndGggLSAxXSkgaW5cbiAgICAgICAgICAgIG9wZW5JbXBsaWVzQ2xvc2VbbmFtZV07XG4gICAgICAgICAgICB0aGlzLm9uY2xvc2V0YWcoZWwpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMueG1sTW9kZSB8fCAhKG5hbWUgaW4gdm9pZEVsZW1lbnRzKSkge1xuICAgICAgICB0aGlzLl9zdGFjay5wdXNoKG5hbWUpO1xuICAgICAgICBpZiAobmFtZSBpbiBmb3JlaWduQ29udGV4dEVsZW1lbnRzKSB0aGlzLl9mb3JlaWduQ29udGV4dC5wdXNoKHRydWUpO1xuICAgICAgICBlbHNlIGlmIChuYW1lIGluIGh0bWxJbnRlZ3JhdGlvbkVsZW1lbnRzKVxuICAgICAgICAgICAgdGhpcy5fZm9yZWlnbkNvbnRleHQucHVzaChmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2Nicy5vbm9wZW50YWduYW1lKSB0aGlzLl9jYnMub25vcGVudGFnbmFtZShuYW1lKTtcbiAgICBpZiAodGhpcy5fY2JzLm9ub3BlbnRhZykgdGhpcy5fYXR0cmlicyA9IHt9O1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbm9wZW50YWdlbmQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl91cGRhdGVQb3NpdGlvbigxKTtcblxuICAgIGlmICh0aGlzLl9hdHRyaWJzKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYnMub25vcGVudGFnKVxuICAgICAgICAgICAgdGhpcy5fY2JzLm9ub3BlbnRhZyh0aGlzLl90YWduYW1lLCB0aGlzLl9hdHRyaWJzKTtcbiAgICAgICAgdGhpcy5fYXR0cmlicyA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgICAhdGhpcy5fb3B0aW9ucy54bWxNb2RlICYmXG4gICAgICAgIHRoaXMuX2Nicy5vbmNsb3NldGFnICYmXG4gICAgICAgIHRoaXMuX3RhZ25hbWUgaW4gdm9pZEVsZW1lbnRzXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX2Nicy5vbmNsb3NldGFnKHRoaXMuX3RhZ25hbWUpO1xuICAgIH1cblxuICAgIHRoaXMuX3RhZ25hbWUgPSBcIlwiO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmNsb3NldGFnID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHRoaXMuX3VwZGF0ZVBvc2l0aW9uKDEpO1xuXG4gICAgaWYgKHRoaXMuX2xvd2VyQ2FzZVRhZ05hbWVzKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChuYW1lIGluIGZvcmVpZ25Db250ZXh0RWxlbWVudHMgfHwgbmFtZSBpbiBodG1sSW50ZWdyYXRpb25FbGVtZW50cykge1xuICAgICAgICB0aGlzLl9mb3JlaWduQ29udGV4dC5wb3AoKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAgIHRoaXMuX3N0YWNrLmxlbmd0aCAmJlxuICAgICAgICAoIShuYW1lIGluIHZvaWRFbGVtZW50cykgfHwgdGhpcy5fb3B0aW9ucy54bWxNb2RlKVxuICAgICkge1xuICAgICAgICB2YXIgcG9zID0gdGhpcy5fc3RhY2subGFzdEluZGV4T2YobmFtZSk7XG4gICAgICAgIGlmIChwb3MgIT09IC0xKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY2JzLm9uY2xvc2V0YWcpIHtcbiAgICAgICAgICAgICAgICBwb3MgPSB0aGlzLl9zdGFjay5sZW5ndGggLSBwb3M7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHBvcy0tKSB0aGlzLl9jYnMub25jbG9zZXRhZyh0aGlzLl9zdGFjay5wb3AoKSk7XG4gICAgICAgICAgICB9IGVsc2UgdGhpcy5fc3RhY2subGVuZ3RoID0gcG9zO1xuICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09IFwicFwiICYmICF0aGlzLl9vcHRpb25zLnhtbE1vZGUpIHtcbiAgICAgICAgICAgIHRoaXMub25vcGVudGFnbmFtZShuYW1lKTtcbiAgICAgICAgICAgIHRoaXMuX2Nsb3NlQ3VycmVudFRhZygpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICghdGhpcy5fb3B0aW9ucy54bWxNb2RlICYmIChuYW1lID09PSBcImJyXCIgfHwgbmFtZSA9PT0gXCJwXCIpKSB7XG4gICAgICAgIHRoaXMub25vcGVudGFnbmFtZShuYW1lKTtcbiAgICAgICAgdGhpcy5fY2xvc2VDdXJyZW50VGFnKCk7XG4gICAgfVxufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbnNlbGZjbG9zaW5ndGFnID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKFxuICAgICAgICB0aGlzLl9vcHRpb25zLnhtbE1vZGUgfHxcbiAgICAgICAgdGhpcy5fb3B0aW9ucy5yZWNvZ25pemVTZWxmQ2xvc2luZyB8fFxuICAgICAgICB0aGlzLl9mb3JlaWduQ29udGV4dFt0aGlzLl9mb3JlaWduQ29udGV4dC5sZW5ndGggLSAxXVxuICAgICkge1xuICAgICAgICB0aGlzLl9jbG9zZUN1cnJlbnRUYWcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9ub3BlbnRhZ2VuZCgpO1xuICAgIH1cbn07XG5cblBhcnNlci5wcm90b3R5cGUuX2Nsb3NlQ3VycmVudFRhZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuYW1lID0gdGhpcy5fdGFnbmFtZTtcblxuICAgIHRoaXMub25vcGVudGFnZW5kKCk7XG5cbiAgICAvL3NlbGYtY2xvc2luZyB0YWdzIHdpbGwgYmUgb24gdGhlIHRvcCBvZiB0aGUgc3RhY2tcbiAgICAvLyhjaGVhcGVyIGNoZWNrIHRoYW4gaW4gb25jbG9zZXRhZylcbiAgICBpZiAodGhpcy5fc3RhY2tbdGhpcy5fc3RhY2subGVuZ3RoIC0gMV0gPT09IG5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Nicy5vbmNsb3NldGFnKSB7XG4gICAgICAgICAgICB0aGlzLl9jYnMub25jbG9zZXRhZyhuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdGFjay5wb3AoKTtcbiAgICAgICAgXG4gICAgfVxufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmF0dHJpYm5hbWUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgaWYgKHRoaXMuX2xvd2VyQ2FzZUF0dHJpYnV0ZU5hbWVzKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIHRoaXMuX2F0dHJpYm5hbWUgPSBuYW1lO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmF0dHJpYmRhdGEgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX2F0dHJpYnZhbHVlICs9IHZhbHVlO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmF0dHJpYmVuZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9jYnMub25hdHRyaWJ1dGUpXG4gICAgICAgIHRoaXMuX2Nicy5vbmF0dHJpYnV0ZSh0aGlzLl9hdHRyaWJuYW1lLCB0aGlzLl9hdHRyaWJ2YWx1ZSk7XG4gICAgaWYgKFxuICAgICAgICB0aGlzLl9hdHRyaWJzICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5fYXR0cmlicywgdGhpcy5fYXR0cmlibmFtZSlcbiAgICApIHtcbiAgICAgICAgdGhpcy5fYXR0cmlic1t0aGlzLl9hdHRyaWJuYW1lXSA9IHRoaXMuX2F0dHJpYnZhbHVlO1xuICAgIH1cbiAgICB0aGlzLl9hdHRyaWJuYW1lID0gXCJcIjtcbiAgICB0aGlzLl9hdHRyaWJ2YWx1ZSA9IFwiXCI7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLl9nZXRJbnN0cnVjdGlvbk5hbWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciBpZHggPSB2YWx1ZS5zZWFyY2gocmVfbmFtZUVuZCksXG4gICAgICAgIG5hbWUgPSBpZHggPCAwID8gdmFsdWUgOiB2YWx1ZS5zdWJzdHIoMCwgaWR4KTtcblxuICAgIGlmICh0aGlzLl9sb3dlckNhc2VUYWdOYW1lcykge1xuICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuYW1lO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmRlY2xhcmF0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodGhpcy5fY2JzLm9ucHJvY2Vzc2luZ2luc3RydWN0aW9uKSB7XG4gICAgICAgIHZhciBuYW1lID0gdGhpcy5fZ2V0SW5zdHJ1Y3Rpb25OYW1lKHZhbHVlKTtcbiAgICAgICAgdGhpcy5fY2JzLm9ucHJvY2Vzc2luZ2luc3RydWN0aW9uKFwiIVwiICsgbmFtZSwgXCIhXCIgKyB2YWx1ZSk7XG4gICAgfVxufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbnByb2Nlc3NpbmdpbnN0cnVjdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuX2Nicy5vbnByb2Nlc3NpbmdpbnN0cnVjdGlvbikge1xuICAgICAgICB2YXIgbmFtZSA9IHRoaXMuX2dldEluc3RydWN0aW9uTmFtZSh2YWx1ZSk7XG4gICAgICAgIHRoaXMuX2Nicy5vbnByb2Nlc3NpbmdpbnN0cnVjdGlvbihcIj9cIiArIG5hbWUsIFwiP1wiICsgdmFsdWUpO1xuICAgIH1cbn07XG5cblBhcnNlci5wcm90b3R5cGUub25jb21tZW50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLl91cGRhdGVQb3NpdGlvbig0KTtcblxuICAgIGlmICh0aGlzLl9jYnMub25jb21tZW50KSB0aGlzLl9jYnMub25jb21tZW50KHZhbHVlKTtcbiAgICBpZiAodGhpcy5fY2JzLm9uY29tbWVudGVuZCkgdGhpcy5fY2JzLm9uY29tbWVudGVuZCgpO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmNkYXRhID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLl91cGRhdGVQb3NpdGlvbigxKTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLnhtbE1vZGUgfHwgdGhpcy5fb3B0aW9ucy5yZWNvZ25pemVDREFUQSkge1xuICAgICAgICBpZiAodGhpcy5fY2JzLm9uY2RhdGFzdGFydCkgdGhpcy5fY2JzLm9uY2RhdGFzdGFydCgpO1xuICAgICAgICBpZiAodGhpcy5fY2JzLm9udGV4dCkgdGhpcy5fY2JzLm9udGV4dCh2YWx1ZSk7XG4gICAgICAgIGlmICh0aGlzLl9jYnMub25jZGF0YWVuZCkgdGhpcy5fY2JzLm9uY2RhdGFlbmQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uY29tbWVudChcIltDREFUQVtcIiArIHZhbHVlICsgXCJdXVwiKTtcbiAgICB9XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLm9uZXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcbiAgICBpZiAodGhpcy5fY2JzLm9uZXJyb3IpIHRoaXMuX2Nicy5vbmVycm9yKGVycik7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLm9uZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2Nicy5vbmNsb3NldGFnKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMuX3N0YWNrLmxlbmd0aDtcbiAgICAgICAgICAgIGkgPiAwO1xuICAgICAgICAgICAgdGhpcy5fY2JzLm9uY2xvc2V0YWcodGhpcy5fc3RhY2tbLS1pXSlcbiAgICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2Nicy5vbmVuZCkgdGhpcy5fY2JzLm9uZW5kKCk7XG59O1xuXG4vL1Jlc2V0cyB0aGUgcGFyc2VyIHRvIGEgYmxhbmsgc3RhdGUsIHJlYWR5IHRvIHBhcnNlIGEgbmV3IEhUTUwgZG9jdW1lbnRcblBhcnNlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fY2JzLm9ucmVzZXQpIHRoaXMuX2Nicy5vbnJlc2V0KCk7XG4gICAgdGhpcy5fdG9rZW5pemVyLnJlc2V0KCk7XG5cbiAgICB0aGlzLl90YWduYW1lID0gXCJcIjtcbiAgICB0aGlzLl9hdHRyaWJuYW1lID0gXCJcIjtcbiAgICB0aGlzLl9hdHRyaWJzID0gbnVsbDtcbiAgICB0aGlzLl9zdGFjayA9IFtdO1xuXG4gICAgaWYgKHRoaXMuX2Nicy5vbnBhcnNlcmluaXQpIHRoaXMuX2Nicy5vbnBhcnNlcmluaXQodGhpcyk7XG59O1xuXG4vL1BhcnNlcyBhIGNvbXBsZXRlIEhUTUwgZG9jdW1lbnQgYW5kIHB1c2hlcyBpdCB0byB0aGUgaGFuZGxlclxuUGFyc2VyLnByb3RvdHlwZS5wYXJzZUNvbXBsZXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgICB0aGlzLmVuZChkYXRhKTtcbn07XG5cblBhcnNlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihjaHVuaykge1xuICAgIHRoaXMuX3Rva2VuaXplci53cml0ZShjaHVuayk7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGNodW5rKSB7XG4gICAgdGhpcy5fdG9rZW5pemVyLmVuZChjaHVuayk7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdG9rZW5pemVyLnBhdXNlKCk7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3Rva2VuaXplci5yZXN1bWUoKTtcbn07XG5cbi8vYWxpYXMgZm9yIGJhY2t3YXJkcyBjb21wYXRcblBhcnNlci5wcm90b3R5cGUucGFyc2VDaHVuayA9IFBhcnNlci5wcm90b3R5cGUud3JpdGU7XG5QYXJzZXIucHJvdG90eXBlLmRvbmUgPSBQYXJzZXIucHJvdG90eXBlLmVuZDtcblxubW9kdWxlLmV4cG9ydHMgPSBQYXJzZXI7XG4iXX0=