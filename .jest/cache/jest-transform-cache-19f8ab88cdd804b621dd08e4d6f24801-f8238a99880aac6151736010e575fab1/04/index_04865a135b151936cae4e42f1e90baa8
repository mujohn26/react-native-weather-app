52596f7aaf7b85d3df107e37fe99c96d
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = formatRelative;

var _index = _interopRequireDefault(require("../differenceInCalendarDays/index.js"));

var _index2 = _interopRequireDefault(require("../format/index.js"));

var _index3 = _interopRequireDefault(require("../locale/en-US/index.js"));

var _index4 = _interopRequireDefault(require("../subMilliseconds/index.js"));

var _index5 = _interopRequireDefault(require("../toDate/index.js"));

var _index6 = _interopRequireDefault(require("../_lib/getTimezoneOffsetInMilliseconds/index.js"));

var _index7 = _interopRequireDefault(require("../_lib/requiredArgs/index.js"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function formatRelative(dirtyDate, dirtyBaseDate, dirtyOptions) {
  (0, _index7.default)(2, arguments);
  var date = (0, _index5.default)(dirtyDate);
  var baseDate = (0, _index5.default)(dirtyBaseDate);
  var options = dirtyOptions || {};
  var locale = options.locale || _index3.default;

  if (!locale.localize) {
    throw new RangeError('locale must contain localize property');
  }

  if (!locale.formatLong) {
    throw new RangeError('locale must contain formatLong property');
  }

  if (!locale.formatRelative) {
    throw new RangeError('locale must contain formatRelative property');
  }

  var diff = (0, _index.default)(date, baseDate);

  if (isNaN(diff)) {
    throw new RangeError('Invalid time value');
  }

  var token;

  if (diff < -6) {
    token = 'other';
  } else if (diff < -1) {
    token = 'lastWeek';
  } else if (diff < 0) {
    token = 'yesterday';
  } else if (diff < 1) {
    token = 'today';
  } else if (diff < 2) {
    token = 'tomorrow';
  } else if (diff < 7) {
    token = 'nextWeek';
  } else {
    token = 'other';
  }

  var utcDate = (0, _index4.default)(date, (0, _index6.default)(date));
  var utcBaseDate = (0, _index4.default)(baseDate, (0, _index6.default)(baseDate));
  var formatStr = locale.formatRelative(token, utcDate, utcBaseDate, options);
  return (0, _index2.default)(date, formatStr, options);
}

module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsImZvcm1hdFJlbGF0aXZlIiwiX2luZGV4IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaW5kZXgyIiwiX2luZGV4MyIsIl9pbmRleDQiLCJfaW5kZXg1IiwiX2luZGV4NiIsIl9pbmRleDciLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGlydHlEYXRlIiwiZGlydHlCYXNlRGF0ZSIsImRpcnR5T3B0aW9ucyIsImFyZ3VtZW50cyIsImRhdGUiLCJiYXNlRGF0ZSIsIm9wdGlvbnMiLCJsb2NhbGUiLCJsb2NhbGl6ZSIsIlJhbmdlRXJyb3IiLCJmb3JtYXRMb25nIiwiZGlmZiIsImlzTmFOIiwidG9rZW4iLCJ1dGNEYXRlIiwidXRjQmFzZURhdGUiLCJmb3JtYXRTdHIiLCJtb2R1bGUiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQzNDQyxFQUFBQSxLQUFLLEVBQUU7QUFEb0MsQ0FBN0M7QUFHQUQsT0FBTyxDQUFDRSxPQUFSLEdBQWtCQyxjQUFsQjs7QUFFQSxJQUFJQyxNQUFNLEdBQUdDLHNCQUFzQixDQUFDQyxPQUFPLHdDQUFSLENBQW5DOztBQUVBLElBQUlDLE9BQU8sR0FBR0Ysc0JBQXNCLENBQUNDLE9BQU8sc0JBQVIsQ0FBcEM7O0FBRUEsSUFBSUUsT0FBTyxHQUFHSCxzQkFBc0IsQ0FBQ0MsT0FBTyw0QkFBUixDQUFwQzs7QUFFQSxJQUFJRyxPQUFPLEdBQUdKLHNCQUFzQixDQUFDQyxPQUFPLCtCQUFSLENBQXBDOztBQUVBLElBQUlJLE9BQU8sR0FBR0wsc0JBQXNCLENBQUNDLE9BQU8sc0JBQVIsQ0FBcEM7O0FBRUEsSUFBSUssT0FBTyxHQUFHTixzQkFBc0IsQ0FBQ0MsT0FBTyxvREFBUixDQUFwQzs7QUFFQSxJQUFJTSxPQUFPLEdBQUdQLHNCQUFzQixDQUFDQyxPQUFPLGlDQUFSLENBQXBDOztBQUVBLFNBQVNELHNCQUFULENBQWdDUSxHQUFoQyxFQUFxQztBQUFFLFNBQU9BLEdBQUcsSUFBSUEsR0FBRyxDQUFDQyxVQUFYLEdBQXdCRCxHQUF4QixHQUE4QjtBQUFFWCxJQUFBQSxPQUFPLEVBQUVXO0FBQVgsR0FBckM7QUFBd0Q7O0FBcUMvRixTQUFTVixjQUFULENBQXdCWSxTQUF4QixFQUFtQ0MsYUFBbkMsRUFBa0RDLFlBQWxELEVBQWdFO0FBQzlELEdBQUMsR0FBR0wsT0FBTyxDQUFDVixPQUFaLEVBQXFCLENBQXJCLEVBQXdCZ0IsU0FBeEI7QUFDQSxNQUFJQyxJQUFJLEdBQUcsQ0FBQyxHQUFHVCxPQUFPLENBQUNSLE9BQVosRUFBcUJhLFNBQXJCLENBQVg7QUFDQSxNQUFJSyxRQUFRLEdBQUcsQ0FBQyxHQUFHVixPQUFPLENBQUNSLE9BQVosRUFBcUJjLGFBQXJCLENBQWY7QUFDQSxNQUFJSyxPQUFPLEdBQUdKLFlBQVksSUFBSSxFQUE5QjtBQUNBLE1BQUlLLE1BQU0sR0FBR0QsT0FBTyxDQUFDQyxNQUFSLElBQWtCZCxPQUFPLENBQUNOLE9BQXZDOztBQUVBLE1BQUksQ0FBQ29CLE1BQU0sQ0FBQ0MsUUFBWixFQUFzQjtBQUNwQixVQUFNLElBQUlDLFVBQUosQ0FBZSx1Q0FBZixDQUFOO0FBQ0Q7O0FBRUQsTUFBSSxDQUFDRixNQUFNLENBQUNHLFVBQVosRUFBd0I7QUFDdEIsVUFBTSxJQUFJRCxVQUFKLENBQWUseUNBQWYsQ0FBTjtBQUNEOztBQUVELE1BQUksQ0FBQ0YsTUFBTSxDQUFDbkIsY0FBWixFQUE0QjtBQUMxQixVQUFNLElBQUlxQixVQUFKLENBQWUsNkNBQWYsQ0FBTjtBQUNEOztBQUVELE1BQUlFLElBQUksR0FBRyxDQUFDLEdBQUd0QixNQUFNLENBQUNGLE9BQVgsRUFBb0JpQixJQUFwQixFQUEwQkMsUUFBMUIsQ0FBWDs7QUFFQSxNQUFJTyxLQUFLLENBQUNELElBQUQsQ0FBVCxFQUFpQjtBQUNmLFVBQU0sSUFBSUYsVUFBSixDQUFlLG9CQUFmLENBQU47QUFDRDs7QUFFRCxNQUFJSSxLQUFKOztBQUVBLE1BQUlGLElBQUksR0FBRyxDQUFDLENBQVosRUFBZTtBQUNiRSxJQUFBQSxLQUFLLEdBQUcsT0FBUjtBQUNELEdBRkQsTUFFTyxJQUFJRixJQUFJLEdBQUcsQ0FBQyxDQUFaLEVBQWU7QUFDcEJFLElBQUFBLEtBQUssR0FBRyxVQUFSO0FBQ0QsR0FGTSxNQUVBLElBQUlGLElBQUksR0FBRyxDQUFYLEVBQWM7QUFDbkJFLElBQUFBLEtBQUssR0FBRyxXQUFSO0FBQ0QsR0FGTSxNQUVBLElBQUlGLElBQUksR0FBRyxDQUFYLEVBQWM7QUFDbkJFLElBQUFBLEtBQUssR0FBRyxPQUFSO0FBQ0QsR0FGTSxNQUVBLElBQUlGLElBQUksR0FBRyxDQUFYLEVBQWM7QUFDbkJFLElBQUFBLEtBQUssR0FBRyxVQUFSO0FBQ0QsR0FGTSxNQUVBLElBQUlGLElBQUksR0FBRyxDQUFYLEVBQWM7QUFDbkJFLElBQUFBLEtBQUssR0FBRyxVQUFSO0FBQ0QsR0FGTSxNQUVBO0FBQ0xBLElBQUFBLEtBQUssR0FBRyxPQUFSO0FBQ0Q7O0FBRUQsTUFBSUMsT0FBTyxHQUFHLENBQUMsR0FBR3BCLE9BQU8sQ0FBQ1AsT0FBWixFQUFxQmlCLElBQXJCLEVBQTJCLENBQUMsR0FBR1IsT0FBTyxDQUFDVCxPQUFaLEVBQXFCaUIsSUFBckIsQ0FBM0IsQ0FBZDtBQUNBLE1BQUlXLFdBQVcsR0FBRyxDQUFDLEdBQUdyQixPQUFPLENBQUNQLE9BQVosRUFBcUJrQixRQUFyQixFQUErQixDQUFDLEdBQUdULE9BQU8sQ0FBQ1QsT0FBWixFQUFxQmtCLFFBQXJCLENBQS9CLENBQWxCO0FBQ0EsTUFBSVcsU0FBUyxHQUFHVCxNQUFNLENBQUNuQixjQUFQLENBQXNCeUIsS0FBdEIsRUFBNkJDLE9BQTdCLEVBQXNDQyxXQUF0QyxFQUFtRFQsT0FBbkQsQ0FBaEI7QUFDQSxTQUFPLENBQUMsR0FBR2QsT0FBTyxDQUFDTCxPQUFaLEVBQXFCaUIsSUFBckIsRUFBMkJZLFNBQTNCLEVBQXNDVixPQUF0QyxDQUFQO0FBQ0Q7O0FBRURXLE1BQU0sQ0FBQ2hDLE9BQVAsR0FBaUJBLE9BQU8sQ0FBQ0UsT0FBekIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGZvcm1hdFJlbGF0aXZlO1xuXG52YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzL2luZGV4LmpzXCIpKTtcblxudmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9mb3JtYXQvaW5kZXguanNcIikpO1xuXG52YXIgX2luZGV4MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2xvY2FsZS9lbi1VUy9pbmRleC5qc1wiKSk7XG5cbnZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vc3ViTWlsbGlzZWNvbmRzL2luZGV4LmpzXCIpKTtcblxudmFyIF9pbmRleDUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi90b0RhdGUvaW5kZXguanNcIikpO1xuXG52YXIgX2luZGV4NiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL19saWIvZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcy9pbmRleC5qc1wiKSk7XG5cbnZhciBfaW5kZXg3ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIEBuYW1lIGZvcm1hdFJlbGF0aXZlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJlcHJlc2VudCB0aGUgZGF0ZSBpbiB3b3JkcyByZWxhdGl2ZSB0byB0aGUgZ2l2ZW4gYmFzZSBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmVwcmVzZW50IHRoZSBkYXRlIGluIHdvcmRzIHJlbGF0aXZlIHRvIHRoZSBnaXZlbiBiYXNlIGRhdGUuXG4gKlxuICogfCBEaXN0YW5jZSB0byB0aGUgYmFzZSBkYXRlIHwgUmVzdWx0ICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgUHJldmlvdXMgNiBkYXlzICAgICAgICAgICB8IGxhc3QgU3VuZGF5IGF0IDA0OjMwIEFNICAgfFxuICogfCBMYXN0IGRheSAgICAgICAgICAgICAgICAgIHwgeWVzdGVyZGF5IGF0IDA0OjMwIEFNICAgICB8XG4gKiB8IFNhbWUgZGF5ICAgICAgICAgICAgICAgICAgfCB0b2RheSBhdCAwNDozMCBBTSAgICAgICAgIHxcbiAqIHwgTmV4dCBkYXkgICAgICAgICAgICAgICAgICB8IHRvbW9ycm93IGF0IDA0OjMwIEFNICAgICAgfFxuICogfCBOZXh0IDYgZGF5cyAgICAgICAgICAgICAgIHwgU3VuZGF5IGF0IDA0OjMwIEFNICAgICAgICB8XG4gKiB8IE90aGVyICAgICAgICAgICAgICAgICAgICAgfCAxMi8zMS8yMDE3ICAgICAgICAgICAgICAgIHxcbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBmb3JtYXRcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGJhc2VEYXRlIC0gdGhlIGRhdGUgdG8gY29tcGFyZSB3aXRoXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBkYXRlIGluIHdvcmRzXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgZGF0ZWAgbXVzdCBub3QgYmUgSW52YWxpZCBEYXRlXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgYmFzZURhdGVgIG11c3Qgbm90IGJlIEludmFsaWQgRGF0ZVxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMubG9jYWxlYCBtdXN0IGNvbnRhaW4gYGxvY2FsaXplYCBwcm9wZXJ0eVxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMubG9jYWxlYCBtdXN0IGNvbnRhaW4gYGZvcm1hdExvbmdgIHByb3BlcnR5XG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5sb2NhbGVgIG11c3QgY29udGFpbiBgZm9ybWF0UmVsYXRpdmVgIHByb3BlcnR5XG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFJlbGF0aXZlKGRpcnR5RGF0ZSwgZGlydHlCYXNlRGF0ZSwgZGlydHlPcHRpb25zKSB7XG4gICgwLCBfaW5kZXg3LmRlZmF1bHQpKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gKDAsIF9pbmRleDUuZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgdmFyIGJhc2VEYXRlID0gKDAsIF9pbmRleDUuZGVmYXVsdCkoZGlydHlCYXNlRGF0ZSk7XG4gIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9O1xuICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUgfHwgX2luZGV4My5kZWZhdWx0O1xuXG4gIGlmICghbG9jYWxlLmxvY2FsaXplKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2xvY2FsZSBtdXN0IGNvbnRhaW4gbG9jYWxpemUgcHJvcGVydHknKTtcbiAgfVxuXG4gIGlmICghbG9jYWxlLmZvcm1hdExvbmcpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignbG9jYWxlIG11c3QgY29udGFpbiBmb3JtYXRMb25nIHByb3BlcnR5Jyk7XG4gIH1cblxuICBpZiAoIWxvY2FsZS5mb3JtYXRSZWxhdGl2ZSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdsb2NhbGUgbXVzdCBjb250YWluIGZvcm1hdFJlbGF0aXZlIHByb3BlcnR5Jyk7XG4gIH1cblxuICB2YXIgZGlmZiA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGF0ZSwgYmFzZURhdGUpO1xuXG4gIGlmIChpc05hTihkaWZmKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHRpbWUgdmFsdWUnKTtcbiAgfVxuXG4gIHZhciB0b2tlbjtcblxuICBpZiAoZGlmZiA8IC02KSB7XG4gICAgdG9rZW4gPSAnb3RoZXInO1xuICB9IGVsc2UgaWYgKGRpZmYgPCAtMSkge1xuICAgIHRva2VuID0gJ2xhc3RXZWVrJztcbiAgfSBlbHNlIGlmIChkaWZmIDwgMCkge1xuICAgIHRva2VuID0gJ3llc3RlcmRheSc7XG4gIH0gZWxzZSBpZiAoZGlmZiA8IDEpIHtcbiAgICB0b2tlbiA9ICd0b2RheSc7XG4gIH0gZWxzZSBpZiAoZGlmZiA8IDIpIHtcbiAgICB0b2tlbiA9ICd0b21vcnJvdyc7XG4gIH0gZWxzZSBpZiAoZGlmZiA8IDcpIHtcbiAgICB0b2tlbiA9ICduZXh0V2Vlayc7XG4gIH0gZWxzZSB7XG4gICAgdG9rZW4gPSAnb3RoZXInO1xuICB9XG5cbiAgdmFyIHV0Y0RhdGUgPSAoMCwgX2luZGV4NC5kZWZhdWx0KShkYXRlLCAoMCwgX2luZGV4Ni5kZWZhdWx0KShkYXRlKSk7XG4gIHZhciB1dGNCYXNlRGF0ZSA9ICgwLCBfaW5kZXg0LmRlZmF1bHQpKGJhc2VEYXRlLCAoMCwgX2luZGV4Ni5kZWZhdWx0KShiYXNlRGF0ZSkpO1xuICB2YXIgZm9ybWF0U3RyID0gbG9jYWxlLmZvcm1hdFJlbGF0aXZlKHRva2VuLCB1dGNEYXRlLCB1dGNCYXNlRGF0ZSwgb3B0aW9ucyk7XG4gIHJldHVybiAoMCwgX2luZGV4Mi5kZWZhdWx0KShkYXRlLCBmb3JtYXRTdHIsIG9wdGlvbnMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDsiXX0=