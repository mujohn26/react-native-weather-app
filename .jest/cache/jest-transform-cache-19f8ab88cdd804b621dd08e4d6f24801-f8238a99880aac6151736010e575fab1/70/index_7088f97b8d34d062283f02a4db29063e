a5f1bd6a8a31358cc1808943d4d50b23
var ElementType = require('domelementtype');

var entities = require('entities');

var unencodedElements = {
  __proto__: null,
  style: true,
  script: true,
  xmp: true,
  iframe: true,
  noembed: true,
  noframes: true,
  plaintext: true,
  noscript: true
};

function formatAttrs(attributes, opts) {
  if (!attributes) return;
  var output = '',
      value;

  for (var key in attributes) {
    value = attributes[key];

    if (output) {
      output += ' ';
    }

    output += key;

    if (value !== null && value !== '' || opts.xmlMode) {
      output += '="' + (opts.decodeEntities ? entities.encodeXML(value) : value) + '"';
    }
  }

  return output;
}

var singleTag = {
  __proto__: null,
  area: true,
  base: true,
  basefont: true,
  br: true,
  col: true,
  command: true,
  embed: true,
  frame: true,
  hr: true,
  img: true,
  input: true,
  isindex: true,
  keygen: true,
  link: true,
  meta: true,
  param: true,
  source: true,
  track: true,
  wbr: true
};

var render = module.exports = function (dom, opts) {
  if (!Array.isArray(dom) && !dom.cheerio) dom = [dom];
  opts = opts || {};
  var output = '';

  for (var i = 0; i < dom.length; i++) {
    var elem = dom[i];
    if (elem.type === 'root') output += render(elem.children, opts);else if (ElementType.isTag(elem)) output += renderTag(elem, opts);else if (elem.type === ElementType.Directive) output += renderDirective(elem);else if (elem.type === ElementType.Comment) output += renderComment(elem);else if (elem.type === ElementType.CDATA) output += renderCdata(elem);else output += renderText(elem, opts);
  }

  return output;
};

function renderTag(elem, opts) {
  if (elem.name === "svg") opts = {
    decodeEntities: opts.decodeEntities,
    xmlMode: true
  };
  var tag = '<' + elem.name,
      attribs = formatAttrs(elem.attribs, opts);

  if (attribs) {
    tag += ' ' + attribs;
  }

  if (opts.xmlMode && (!elem.children || elem.children.length === 0)) {
    tag += '/>';
  } else {
    tag += '>';

    if (elem.children) {
      tag += render(elem.children, opts);
    }

    if (!singleTag[elem.name] || opts.xmlMode) {
      tag += '</' + elem.name + '>';
    }
  }

  return tag;
}

function renderDirective(elem) {
  return '<' + elem.data + '>';
}

function renderText(elem, opts) {
  var data = elem.data || '';

  if (opts.decodeEntities && !(elem.parent && elem.parent.name in unencodedElements)) {
    data = entities.encodeXML(data);
  }

  return data;
}

function renderCdata(elem) {
  return '<![CDATA[' + elem.children[0].data + ']]>';
}

function renderComment(elem) {
  return '<!--' + elem.data + '-->';
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkVsZW1lbnRUeXBlIiwicmVxdWlyZSIsImVudGl0aWVzIiwidW5lbmNvZGVkRWxlbWVudHMiLCJfX3Byb3RvX18iLCJzdHlsZSIsInNjcmlwdCIsInhtcCIsImlmcmFtZSIsIm5vZW1iZWQiLCJub2ZyYW1lcyIsInBsYWludGV4dCIsIm5vc2NyaXB0IiwiZm9ybWF0QXR0cnMiLCJhdHRyaWJ1dGVzIiwib3B0cyIsIm91dHB1dCIsInZhbHVlIiwia2V5IiwieG1sTW9kZSIsImRlY29kZUVudGl0aWVzIiwiZW5jb2RlWE1MIiwic2luZ2xlVGFnIiwiYXJlYSIsImJhc2UiLCJiYXNlZm9udCIsImJyIiwiY29sIiwiY29tbWFuZCIsImVtYmVkIiwiZnJhbWUiLCJociIsImltZyIsImlucHV0IiwiaXNpbmRleCIsImtleWdlbiIsImxpbmsiLCJtZXRhIiwicGFyYW0iLCJzb3VyY2UiLCJ0cmFjayIsIndiciIsInJlbmRlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJkb20iLCJBcnJheSIsImlzQXJyYXkiLCJjaGVlcmlvIiwiaSIsImxlbmd0aCIsImVsZW0iLCJ0eXBlIiwiY2hpbGRyZW4iLCJpc1RhZyIsInJlbmRlclRhZyIsIkRpcmVjdGl2ZSIsInJlbmRlckRpcmVjdGl2ZSIsIkNvbW1lbnQiLCJyZW5kZXJDb21tZW50IiwiQ0RBVEEiLCJyZW5kZXJDZGF0YSIsInJlbmRlclRleHQiLCJuYW1lIiwidGFnIiwiYXR0cmlicyIsImRhdGEiLCJwYXJlbnQiXSwibWFwcGluZ3MiOiJBQUdBLElBQUlBLFdBQVcsR0FBR0MsT0FBTyxDQUFDLGdCQUFELENBQXpCOztBQUNBLElBQUlDLFFBQVEsR0FBR0QsT0FBTyxDQUFDLFVBQUQsQ0FBdEI7O0FBRUEsSUFBSUUsaUJBQWlCLEdBQUc7QUFDdEJDLEVBQUFBLFNBQVMsRUFBRSxJQURXO0FBRXRCQyxFQUFBQSxLQUFLLEVBQUUsSUFGZTtBQUd0QkMsRUFBQUEsTUFBTSxFQUFFLElBSGM7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QUF1QlIsSUFBdkIsRUFBNkI7QUFDM0IsU0FBTyxTQUFTQSxJQUFJLENBQUNlLElBQWQsR0FBcUIsS0FBNUI7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gIE1vZHVsZSBkZXBlbmRlbmNpZXNcbiovXG52YXIgRWxlbWVudFR5cGUgPSByZXF1aXJlKCdkb21lbGVtZW50dHlwZScpO1xudmFyIGVudGl0aWVzID0gcmVxdWlyZSgnZW50aXRpZXMnKTtcblxudmFyIHVuZW5jb2RlZEVsZW1lbnRzID0ge1xuICBfX3Byb3RvX186IG51bGwsXG4gIHN0eWxlOiB0cnVlLFxuICBzY3JpcHQ6IHRydWUsXG4gIHhtcDogdHJ1ZSxcbiAgaWZyYW1lOiB0cnVlLFxuICBub2VtYmVkOiB0cnVlLFxuICBub2ZyYW1lczogdHJ1ZSxcbiAgcGxhaW50ZXh0OiB0cnVlLFxuICBub3NjcmlwdDogdHJ1ZVxufTtcblxuLypcbiAgRm9ybWF0IGF0dHJpYnV0ZXNcbiovXG5mdW5jdGlvbiBmb3JtYXRBdHRycyhhdHRyaWJ1dGVzLCBvcHRzKSB7XG4gIGlmICghYXR0cmlidXRlcykgcmV0dXJuO1xuXG4gIHZhciBvdXRwdXQgPSAnJyxcbiAgICAgIHZhbHVlO1xuXG4gIC8vIExvb3AgdGhyb3VnaCB0aGUgYXR0cmlidXRlc1xuICBmb3IgKHZhciBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgIHZhbHVlID0gYXR0cmlidXRlc1trZXldO1xuICAgIGlmIChvdXRwdXQpIHtcbiAgICAgIG91dHB1dCArPSAnICc7XG4gICAgfVxuXG4gICAgb3V0cHV0ICs9IGtleTtcbiAgICBpZiAoKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSAnJykgfHwgb3B0cy54bWxNb2RlKSB7XG4gICAgICAgIG91dHB1dCArPSAnPVwiJyArIChvcHRzLmRlY29kZUVudGl0aWVzID8gZW50aXRpZXMuZW5jb2RlWE1MKHZhbHVlKSA6IHZhbHVlKSArICdcIic7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuLypcbiAgU2VsZi1lbmNsb3NpbmcgdGFncyAoc3RvbGVuIGZyb20gbm9kZS1odG1scGFyc2VyKVxuKi9cbnZhciBzaW5nbGVUYWcgPSB7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgYXJlYTogdHJ1ZSxcbiAgYmFzZTogdHJ1ZSxcbiAgYmFzZWZvbnQ6IHRydWUsXG4gIGJyOiB0cnVlLFxuICBjb2w6IHRydWUsXG4gIGNvbW1hbmQ6IHRydWUsXG4gIGVtYmVkOiB0cnVlLFxuICBmcmFtZTogdHJ1ZSxcbiAgaHI6IHRydWUsXG4gIGltZzogdHJ1ZSxcbiAgaW5wdXQ6IHRydWUsXG4gIGlzaW5kZXg6IHRydWUsXG4gIGtleWdlbjogdHJ1ZSxcbiAgbGluazogdHJ1ZSxcbiAgbWV0YTogdHJ1ZSxcbiAgcGFyYW06IHRydWUsXG4gIHNvdXJjZTogdHJ1ZSxcbiAgdHJhY2s6IHRydWUsXG4gIHdicjogdHJ1ZSxcbn07XG5cblxudmFyIHJlbmRlciA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZG9tLCBvcHRzKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShkb20pICYmICFkb20uY2hlZXJpbykgZG9tID0gW2RvbV07XG4gIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gIHZhciBvdXRwdXQgPSAnJztcblxuICBmb3IodmFyIGkgPSAwOyBpIDwgZG9tLmxlbmd0aDsgaSsrKXtcbiAgICB2YXIgZWxlbSA9IGRvbVtpXTtcblxuICAgIGlmIChlbGVtLnR5cGUgPT09ICdyb290JylcbiAgICAgIG91dHB1dCArPSByZW5kZXIoZWxlbS5jaGlsZHJlbiwgb3B0cyk7XG4gICAgZWxzZSBpZiAoRWxlbWVudFR5cGUuaXNUYWcoZWxlbSkpXG4gICAgICBvdXRwdXQgKz0gcmVuZGVyVGFnKGVsZW0sIG9wdHMpO1xuICAgIGVsc2UgaWYgKGVsZW0udHlwZSA9PT0gRWxlbWVudFR5cGUuRGlyZWN0aXZlKVxuICAgICAgb3V0cHV0ICs9IHJlbmRlckRpcmVjdGl2ZShlbGVtKTtcbiAgICBlbHNlIGlmIChlbGVtLnR5cGUgPT09IEVsZW1lbnRUeXBlLkNvbW1lbnQpXG4gICAgICBvdXRwdXQgKz0gcmVuZGVyQ29tbWVudChlbGVtKTtcbiAgICBlbHNlIGlmIChlbGVtLnR5cGUgPT09IEVsZW1lbnRUeXBlLkNEQVRBKVxuICAgICAgb3V0cHV0ICs9IHJlbmRlckNkYXRhKGVsZW0pO1xuICAgIGVsc2VcbiAgICAgIG91dHB1dCArPSByZW5kZXJUZXh0KGVsZW0sIG9wdHMpO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn07XG5cbmZ1bmN0aW9uIHJlbmRlclRhZyhlbGVtLCBvcHRzKSB7XG4gIC8vIEhhbmRsZSBTVkdcbiAgaWYgKGVsZW0ubmFtZSA9PT0gXCJzdmdcIikgb3B0cyA9IHtkZWNvZGVFbnRpdGllczogb3B0cy5kZWNvZGVFbnRpdGllcywgeG1sTW9kZTogdHJ1ZX07XG5cbiAgdmFyIHRhZyA9ICc8JyArIGVsZW0ubmFtZSxcbiAgICAgIGF0dHJpYnMgPSBmb3JtYXRBdHRycyhlbGVtLmF0dHJpYnMsIG9wdHMpO1xuXG4gIGlmIChhdHRyaWJzKSB7XG4gICAgdGFnICs9ICcgJyArIGF0dHJpYnM7XG4gIH1cblxuICBpZiAoXG4gICAgb3B0cy54bWxNb2RlXG4gICAgJiYgKCFlbGVtLmNoaWxkcmVuIHx8IGVsZW0uY2hpbGRyZW4ubGVuZ3RoID09PSAwKVxuICApIHtcbiAgICB0YWcgKz0gJy8+JztcbiAgfSBlbHNlIHtcbiAgICB0YWcgKz0gJz4nO1xuICAgIGlmIChlbGVtLmNoaWxkcmVuKSB7XG4gICAgICB0YWcgKz0gcmVuZGVyKGVsZW0uY2hpbGRyZW4sIG9wdHMpO1xuICAgIH1cblxuICAgIGlmICghc2luZ2xlVGFnW2VsZW0ubmFtZV0gfHwgb3B0cy54bWxNb2RlKSB7XG4gICAgICB0YWcgKz0gJzwvJyArIGVsZW0ubmFtZSArICc+JztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFnO1xufVxuXG5mdW5jdGlvbiByZW5kZXJEaXJlY3RpdmUoZWxlbSkge1xuICByZXR1cm4gJzwnICsgZWxlbS5kYXRhICsgJz4nO1xufVxuXG5mdW5jdGlvbiByZW5kZXJUZXh0KGVsZW0sIG9wdHMpIHtcbiAgdmFyIGRhdGEgPSBlbGVtLmRhdGEgfHwgJyc7XG5cbiAgLy8gaWYgZW50aXRpZXMgd2VyZW4ndCBkZWNvZGVkLCBubyBuZWVkIHRvIGVuY29kZSB0aGVtIGJhY2tcbiAgaWYgKG9wdHMuZGVjb2RlRW50aXRpZXMgJiYgIShlbGVtLnBhcmVudCAmJiBlbGVtLnBhcmVudC5uYW1lIGluIHVuZW5jb2RlZEVsZW1lbnRzKSkge1xuICAgIGRhdGEgPSBlbnRpdGllcy5lbmNvZGVYTUwoZGF0YSk7XG4gIH1cblxuICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2RhdGEoZWxlbSkge1xuICByZXR1cm4gJzwhW0NEQVRBWycgKyBlbGVtLmNoaWxkcmVuWzBdLmRhdGEgKyAnXV0+Jztcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ29tbWVudChlbGVtKSB7XG4gIHJldHVybiAnPCEtLScgKyBlbGVtLmRhdGEgKyAnLS0+Jztcbn1cbiJdfQ==