{"version":3,"sources":["mount.js"],"names":["Object","defineProperty","exports","value","default","_omitBy","_interopRequireDefault","require","_isNil","_reactIs","_Debug","_RSTTraversal","_utils","obj","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","getChildren","node","options","mode","type","children","compact","childrenOfNode","map","n","internalNodeToJson","getProps","props","propsOfNode","val","undefined","noKey","Array","isArray","child","$$typeof","ForwardRef","Memo","rendered","applyMap","typeName","Symbol","for","mountToJson","wrapper","getNodesInternal","nodes","getNodeInternal","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _omitBy = _interopRequireDefault(require(\"lodash/omitBy\"));\n\nvar _isNil = _interopRequireDefault(require(\"lodash/isNil\"));\n\nvar _reactIs = require(\"react-is\");\n\nvar _Debug = require(\"enzyme/build/Debug\");\n\nvar _RSTTraversal = require(\"enzyme/build/RSTTraversal\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction getChildren(node, options) {\n  if (options.mode === 'shallow' && typeof node.type === 'function') {\n    return null;\n  }\n\n  const children = (0, _utils.compact)((0, _RSTTraversal.childrenOfNode)(node).map(n => internalNodeToJson(n, options)));\n  return children.length > 0 ? children : null;\n}\n\nfunction getProps(node, options) {\n  const props = (0, _omitBy.default)(_objectSpread({}, (0, _RSTTraversal.propsOfNode)(node)), (val, key) => {\n    return key === 'children' || val === undefined;\n  });\n\n  if (!(0, _isNil.default)(node.key) && options.noKey !== true) {\n    props.key = node.key;\n  }\n\n  return props;\n}\n\nfunction internalNodeToJson(node, options) {\n  if (typeof node === 'string' || typeof node === 'number') {\n    return node;\n  }\n\n  if ((0, _isNil.default)(node) || node === false) {\n    return '';\n  }\n\n  if (Array.isArray(node)) {\n    // enzyme does some funny stuff with memo function components turning the children\n    // into an array resulting in undesirable snapshots\n    if (node.length === 1) {\n      return internalNodeToJson(node[0], options);\n    }\n\n    return node.map(child => internalNodeToJson(child, options));\n  }\n\n  if (options.mode === 'deep' && (typeof node.type === 'function' || node.type.$$typeof === _reactIs.ForwardRef || node.type.$$typeof === _reactIs.Memo)) {\n    return internalNodeToJson(node.rendered, options);\n  }\n\n  return (0, _utils.applyMap)({\n    node,\n    type: (0, _Debug.typeName)(node),\n    props: getProps(node, options),\n    children: getChildren(node, options),\n    $$typeof: Symbol.for('react.test.json')\n  }, options);\n}\n\nconst mountToJson = (wrapper, options = {}) => {\n  if ((0, _isNil.default)(wrapper) || wrapper.length === 0) {\n    return null;\n  }\n\n  if (wrapper.length > 1 && typeof wrapper.getNodesInternal === 'function') {\n    const nodes = wrapper.getNodesInternal();\n    return nodes.map(node => internalNodeToJson(node, options));\n  }\n\n  if (typeof wrapper.getNodeInternal === 'function') {\n    const node = wrapper.getNodeInternal();\n    return internalNodeToJson(node, options);\n  }\n\n  return null;\n};\n\nvar _default = mountToJson;\nexports.default = _default;"]}