a47772074a7181a2c288f0bc90e8957f
var parse = require("./parse"),
    defaultOptions = require("./options").default,
    flattenOptions = require("./options").flatten,
    isHtml = require("./utils").isHtml,
    _ = {
  extend: require('lodash/assignIn'),
  bind: require('lodash/bind'),
  forEach: require('lodash/forEach'),
  defaults: require('lodash/defaults')
};

var api = [require("./api/attributes"), require("./api/traversing"), require("./api/manipulation"), require("./api/css"), require("./api/forms")];

var Cheerio = module.exports = function (selector, context, root, options) {
  if (!(this instanceof Cheerio)) return new Cheerio(selector, context, root, options);
  this.options = _.defaults(flattenOptions(options), this.options, defaultOptions);
  if (!selector) return this;

  if (root) {
    if (typeof root === 'string') root = parse(root, this.options, false);
    this._root = Cheerio.call(this, root);
  }

  if (selector.cheerio) return selector;
  if (isNode(selector)) selector = [selector];

  if (Array.isArray(selector)) {
    _.forEach(selector, _.bind(function (elem, idx) {
      this[idx] = elem;
    }, this));

    this.length = selector.length;
    return this;
  }

  if (typeof selector === 'string' && isHtml(selector)) {
    return Cheerio.call(this, parse(selector, this.options, false).children);
  }

  if (!context) {
    context = this._root;
  } else if (typeof context === 'string') {
    if (isHtml(context)) {
      context = parse(context, this.options, false);
      context = Cheerio.call(this, context);
    } else {
      selector = [context, selector].join(' ');
      context = this._root;
    }
  } else if (!context.cheerio) {
    context = Cheerio.call(this, context);
  }

  if (!context) return this;
  return context.find(selector);
};

_.extend(Cheerio, require("./static"));

Cheerio.prototype.cheerio = '[cheerio object]';
Cheerio.prototype.length = 0;
Cheerio.prototype.splice = Array.prototype.splice;

Cheerio.prototype._make = function (dom, context) {
  var cheerio = new this.constructor(dom, context, this._root, this.options);
  cheerio.prevObject = this;
  return cheerio;
};

Cheerio.prototype.toArray = function () {
  return this.get();
};

api.forEach(function (mod) {
  _.extend(Cheerio.prototype, mod);
});

var isNode = function isNode(obj) {
  return obj.name || obj.type === 'text' || obj.type === 'comment';
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWVyaW8uanMiXSwibmFtZXMiOlsicGFyc2UiLCJyZXF1aXJlIiwiZGVmYXVsdE9wdGlvbnMiLCJkZWZhdWx0IiwiZmxhdHRlbk9wdGlvbnMiLCJmbGF0dGVuIiwiaXNIdG1sIiwiXyIsImV4dGVuZCIsImJpbmQiLCJmb3JFYWNoIiwiZGVmYXVsdHMiLCJhcGkiLCJDaGVlcmlvIiwibW9kdWxlIiwiZXhwb3J0cyIsInNlbGVjdG9yIiwiY29udGV4dCIsInJvb3QiLCJvcHRpb25zIiwiX3Jvb3QiLCJjYWxsIiwiY2hlZXJpbyIsImlzTm9kZSIsIkFycmF5IiwiaXNBcnJheSIsImVsZW0iLCJpZHgiLCJsZW5ndGgiLCJjaGlsZHJlbiIsImpvaW4iLCJmaW5kIiwicHJvdG90eXBlIiwic3BsaWNlIiwiX21ha2UiLCJkb20iLCJjb25zdHJ1Y3RvciIsInByZXZPYmplY3QiLCJ0b0FycmF5IiwiZ2V0IiwibW9kIiwib2JqIiwibmFtZSIsInR5cGUiXSwibWFwcGluZ3MiOiJBQUlBLElBQUlBLEtBQUssR0FBR0MsT0FBTyxXQUFuQjtBQUFBLElBQ0lDLGNBQWMsR0FBR0QsT0FBTyxhQUFQLENBQXFCRSxPQUQxQztBQUFBLElBRUlDLGNBQWMsR0FBR0gsT0FBTyxhQUFQLENBQXFCSSxPQUYxQztBQUFBLElBR0lDLE1BQU0sR0FBR0wsT0FBTyxXQUFQLENBQW1CSyxNQUhoQztBQUFBLElBSUlDLENBQUMsR0FBRztBQUNGQyxFQUFBQSxNQUFNLEVBQUVQLE9BQU8sQ0FBQyxpQkFBRCxDQURiO0FBRUZRLEVBQUFBLElBQUksRUFBRVIsT0FBTyxDQUFDLGFBQUQsQ0FGWDtBQUdGUyxFQUFBQSxPQUFPLEVBQUVULE9BQU8sQ0FBQyxnQkFBRCxDQUhkO0FBSUZVLEVBQUFBLFFBQVEsRUFBRVYsT0FBTyxDQUFDLGlCQUFEO0FBSmYsQ0FKUjs7QUFlQSxJQUFJVyxHQUFHLEdBQUcsQ0FDUlgsT0FBTyxvQkFEQyxFQUVSQSxPQUFPLG9CQUZDLEVBR1JBLE9BQU8sc0JBSEMs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RixDQUFTSyxPQUFULEVBQWtCWixPQUFPLFlBQXpCOztBQU1BWSxPQUFPLENBQUNtQixTQUFSLENBQWtCVixPQUFsQixHQUE0QixrQkFBNUI7QUFNQVQsT0FBTyxDQUFDbUIsU0FBUixDQUFrQkosTUFBbEIsR0FBMkIsQ0FBM0I7QUFDQWYsT0FBTyxDQUFDbUIsU0FBUixDQUFrQkMsTUFBbEIsR0FBMkJULEtBQUssQ0FBQ1EsU0FBTixDQUFnQkMsTUFBM0M7O0FBUUFwQixPQUFPLENBQUNtQixTQUFSLENBQWtCRSxLQUFsQixHQUEwQixVQUFTQyxHQUFULEVBQWNsQixPQUFkLEVBQXVCO0FBQy9DLE1BQUlLLE9BQU8sR0FBRyxJQUFJLEtBQUtjLFdBQVQsQ0FBcUJELEdBQXJCLEVBQTBCbEIsT0FBMUIsRUFBbUMsS0FBS0csS0FBeEMsRUFBK0MsS0FBS0QsT0FBcEQsQ0FBZDtBQUNBRyxFQUFBQSxPQUFPLENBQUNlLFVBQVIsR0FBcUIsSUFBckI7QUFDQSxTQUFPZixPQUFQO0FBQ0QsQ0FKRDs7QUFVQVQsT0FBTyxDQUFDbUIsU0FBUixDQUFrQk0sT0FBbEIsR0FBNEIsWUFBVztBQUNyQyxTQUFPLEtBQUtDLEdBQUwsRUFBUDtBQUNELENBRkQ7O0FBT0EzQixHQUFHLENBQUNGLE9BQUosQ0FBWSxVQUFTOEIsR0FBVCxFQUFjO0FBQ3hCakMsRUFBQUEsQ0FBQyxDQUFDQyxNQUFGLENBQVNLLE9BQU8sQ0FBQ21CLFNBQWpCLEVBQTRCUSxHQUE1QjtBQUNELENBRkQ7O0FBSUEsSUFBSWpCLE1BQU0sR0FBRyxTQUFUQSxNQUFTLENBQVNrQixHQUFULEVBQWM7QUFDekIsU0FBT0EsR0FBRyxDQUFDQyxJQUFKLElBQVlELEdBQUcsQ0FBQ0UsSUFBSixLQUFhLE1BQXpCLElBQW1DRixHQUFHLENBQUNFLElBQUosS0FBYSxTQUF2RDtBQUNELENBRkQiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICBNb2R1bGUgZGVwZW5kZW5jaWVzXG4qL1xuXG52YXIgcGFyc2UgPSByZXF1aXJlKCcuL3BhcnNlJyksXG4gICAgZGVmYXVsdE9wdGlvbnMgPSByZXF1aXJlKCcuL29wdGlvbnMnKS5kZWZhdWx0LFxuICAgIGZsYXR0ZW5PcHRpb25zID0gcmVxdWlyZSgnLi9vcHRpb25zJykuZmxhdHRlbixcbiAgICBpc0h0bWwgPSByZXF1aXJlKCcuL3V0aWxzJykuaXNIdG1sLFxuICAgIF8gPSB7XG4gICAgICBleHRlbmQ6IHJlcXVpcmUoJ2xvZGFzaC9hc3NpZ25JbicpLFxuICAgICAgYmluZDogcmVxdWlyZSgnbG9kYXNoL2JpbmQnKSxcbiAgICAgIGZvckVhY2g6IHJlcXVpcmUoJ2xvZGFzaC9mb3JFYWNoJyksXG4gICAgICBkZWZhdWx0czogcmVxdWlyZSgnbG9kYXNoL2RlZmF1bHRzJylcbiAgICB9O1xuXG4vKlxuICogVGhlIEFQSVxuICovXG5cbnZhciBhcGkgPSBbXG4gIHJlcXVpcmUoJy4vYXBpL2F0dHJpYnV0ZXMnKSxcbiAgcmVxdWlyZSgnLi9hcGkvdHJhdmVyc2luZycpLFxuICByZXF1aXJlKCcuL2FwaS9tYW5pcHVsYXRpb24nKSxcbiAgcmVxdWlyZSgnLi9hcGkvY3NzJyksXG4gIHJlcXVpcmUoJy4vYXBpL2Zvcm1zJylcbl07XG5cbi8qXG4gKiBJbnN0YW5jZSBvZiBjaGVlcmlvXG4gKi9cblxudmFyIENoZWVyaW8gPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBjb250ZXh0LCByb290LCBvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBDaGVlcmlvKSkgcmV0dXJuIG5ldyBDaGVlcmlvKHNlbGVjdG9yLCBjb250ZXh0LCByb290LCBvcHRpb25zKTtcblxuICB0aGlzLm9wdGlvbnMgPSBfLmRlZmF1bHRzKGZsYXR0ZW5PcHRpb25zKG9wdGlvbnMpLCB0aGlzLm9wdGlvbnMsIGRlZmF1bHRPcHRpb25zKTtcblxuICAvLyAkKCksICQobnVsbCksICQodW5kZWZpbmVkKSwgJChmYWxzZSlcbiAgaWYgKCFzZWxlY3RvcikgcmV0dXJuIHRoaXM7XG5cbiAgaWYgKHJvb3QpIHtcbiAgICBpZiAodHlwZW9mIHJvb3QgPT09ICdzdHJpbmcnKSByb290ID0gcGFyc2Uocm9vdCwgdGhpcy5vcHRpb25zLCBmYWxzZSk7XG4gICAgdGhpcy5fcm9vdCA9IENoZWVyaW8uY2FsbCh0aGlzLCByb290KTtcbiAgfVxuXG4gIC8vICQoJClcbiAgaWYgKHNlbGVjdG9yLmNoZWVyaW8pIHJldHVybiBzZWxlY3RvcjtcblxuICAvLyAkKGRvbSlcbiAgaWYgKGlzTm9kZShzZWxlY3RvcikpXG4gICAgc2VsZWN0b3IgPSBbc2VsZWN0b3JdO1xuXG4gIC8vICQoW2RvbV0pXG4gIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdG9yKSkge1xuICAgIF8uZm9yRWFjaChzZWxlY3RvciwgXy5iaW5kKGZ1bmN0aW9uKGVsZW0sIGlkeCkge1xuICAgICAgdGhpc1tpZHhdID0gZWxlbTtcbiAgICB9LCB0aGlzKSk7XG4gICAgdGhpcy5sZW5ndGggPSBzZWxlY3Rvci5sZW5ndGg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyAkKDxodG1sPilcbiAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycgJiYgaXNIdG1sKHNlbGVjdG9yKSkge1xuICAgIHJldHVybiBDaGVlcmlvLmNhbGwodGhpcywgcGFyc2Uoc2VsZWN0b3IsIHRoaXMub3B0aW9ucywgZmFsc2UpLmNoaWxkcmVuKTtcbiAgfVxuXG4gIC8vIElmIHdlIGRvbid0IGhhdmUgYSBjb250ZXh0LCBtYXliZSB3ZSBoYXZlIGEgcm9vdCwgZnJvbSBsb2FkaW5nXG4gIGlmICghY29udGV4dCkge1xuICAgIGNvbnRleHQgPSB0aGlzLl9yb290O1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjb250ZXh0ID09PSAnc3RyaW5nJykge1xuICAgIGlmIChpc0h0bWwoY29udGV4dCkpIHtcbiAgICAgIC8vICQoJ2xpJywgJzx1bD4uLi48L3VsPicpXG4gICAgICBjb250ZXh0ID0gcGFyc2UoY29udGV4dCwgdGhpcy5vcHRpb25zLCBmYWxzZSk7XG4gICAgICBjb250ZXh0ID0gQ2hlZXJpby5jYWxsKHRoaXMsIGNvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyAkKCdsaScsICd1bCcpXG4gICAgICBzZWxlY3RvciA9IFtjb250ZXh0LCBzZWxlY3Rvcl0uam9pbignICcpO1xuICAgICAgY29udGV4dCA9IHRoaXMuX3Jvb3Q7XG4gICAgfVxuICAvLyAkKCdsaScsIG5vZGUpLCAkKCdsaScsIFtub2Rlc10pXG4gIH0gZWxzZSBpZiAoIWNvbnRleHQuY2hlZXJpbykge1xuICAgIGNvbnRleHQgPSBDaGVlcmlvLmNhbGwodGhpcywgY29udGV4dCk7XG4gIH1cblxuICAvLyBJZiB3ZSBzdGlsbCBkb24ndCBoYXZlIGEgY29udGV4dCwgcmV0dXJuXG4gIGlmICghY29udGV4dCkgcmV0dXJuIHRoaXM7XG5cbiAgLy8gI2lkLCAuY2xhc3MsIHRhZ1xuICByZXR1cm4gY29udGV4dC5maW5kKHNlbGVjdG9yKTtcbn07XG5cbi8qKlxuICogTWl4IGluIGBzdGF0aWNgXG4gKi9cblxuXy5leHRlbmQoQ2hlZXJpbywgcmVxdWlyZSgnLi9zdGF0aWMnKSk7XG5cbi8qXG4gKiBTZXQgYSBzaWduYXR1cmUgb2YgdGhlIG9iamVjdFxuICovXG5cbkNoZWVyaW8ucHJvdG90eXBlLmNoZWVyaW8gPSAnW2NoZWVyaW8gb2JqZWN0XSc7XG5cbi8qXG4gKiBNYWtlIGNoZWVyaW8gYW4gYXJyYXktbGlrZSBvYmplY3RcbiAqL1xuXG5DaGVlcmlvLnByb3RvdHlwZS5sZW5ndGggPSAwO1xuQ2hlZXJpby5wcm90b3R5cGUuc3BsaWNlID0gQXJyYXkucHJvdG90eXBlLnNwbGljZTtcblxuLypcbiAqIE1ha2UgYSBjaGVlcmlvIG9iamVjdFxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbkNoZWVyaW8ucHJvdG90eXBlLl9tYWtlID0gZnVuY3Rpb24oZG9tLCBjb250ZXh0KSB7XG4gIHZhciBjaGVlcmlvID0gbmV3IHRoaXMuY29uc3RydWN0b3IoZG9tLCBjb250ZXh0LCB0aGlzLl9yb290LCB0aGlzLm9wdGlvbnMpO1xuICBjaGVlcmlvLnByZXZPYmplY3QgPSB0aGlzO1xuICByZXR1cm4gY2hlZXJpbztcbn07XG5cbi8qKlxuICogVHVybiBhIGNoZWVyaW8gb2JqZWN0IGludG8gYW4gYXJyYXlcbiAqL1xuXG5DaGVlcmlvLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmdldCgpO1xufTtcblxuLyoqXG4gKiBQbHVnIGluIHRoZSBBUElcbiAqL1xuYXBpLmZvckVhY2goZnVuY3Rpb24obW9kKSB7XG4gIF8uZXh0ZW5kKENoZWVyaW8ucHJvdG90eXBlLCBtb2QpO1xufSk7XG5cbnZhciBpc05vZGUgPSBmdW5jdGlvbihvYmopIHtcbiAgcmV0dXJuIG9iai5uYW1lIHx8IG9iai50eXBlID09PSAndGV4dCcgfHwgb2JqLnR5cGUgPT09ICdjb21tZW50Jztcbn07XG4iXX0=