2f50c7e978b2f97dfc044a07dba5bf24
var composeArgs = require("./_composeArgs"),
    composeArgsRight = require("./_composeArgsRight"),
    replaceHolders = require("./_replaceHolders");

var PLACEHOLDER = '__lodash_placeholder__';
var WRAP_BIND_FLAG = 1,
    WRAP_BIND_KEY_FLAG = 2,
    WRAP_CURRY_BOUND_FLAG = 4,
    WRAP_CURRY_FLAG = 8,
    WRAP_ARY_FLAG = 128,
    WRAP_REARG_FLAG = 256;
var nativeMin = Math.min;

function mergeData(data, source) {
  var bitmask = data[1],
      srcBitmask = source[1],
      newBitmask = bitmask | srcBitmask,
      isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);
  var isCombo = srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_CURRY_FLAG || srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_REARG_FLAG && data[7].length <= source[8] || srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG) && source[7].length <= source[8] && bitmask == WRAP_CURRY_FLAG;

  if (!(isCommon || isCombo)) {
    return data;
  }

  if (srcBitmask & WRAP_BIND_FLAG) {
    data[2] = source[2];
    newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;
  }

  var value = source[3];

  if (value) {
    var partials = data[3];
    data[3] = partials ? composeArgs(partials, value, source[4]) : value;
    data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];
  }

  value = source[5];

  if (value) {
    partials = data[5];
    data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;
    data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];
  }

  value = source[7];

  if (value) {
    data[7] = value;
  }

  if (srcBitmask & WRAP_ARY_FLAG) {
    data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);
  }

  if (data[9] == null) {
    data[9] = source[9];
  }

  data[0] = source[0];
  data[1] = newBitmask;
  return data;
}

module.exports = mergeData;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9tZXJnZURhdGEuanMiXSwibmFtZXMiOlsiY29tcG9zZUFyZ3MiLCJyZXF1aXJlIiwiY29tcG9zZUFyZ3NSaWdodCIsInJlcGxhY2VIb2xkZXJzIiwiUExBQ0VIT0xERVIiLCJXUkFQX0JJTkRfRkxBRyIsIldSQVBfQklORF9LRVlfRkxBRyIsIldSQVBfQ1VSUllfQk9VTkRfRkxBRyIsIldSQVBfQ1VSUllfRkxBRyIsIldSQVBfQVJZX0ZMQUciLCJXUkFQX1JFQVJHX0ZMQUciLCJuYXRpdmVNaW4iLCJNYXRoIiwibWluIiwibWVyZ2VEYXRhIiwiZGF0YSIsInNvdXJjZSIsImJpdG1hc2siLCJzcmNCaXRtYXNrIiwibmV3Qml0bWFzayIsImlzQ29tbW9uIiwiaXNDb21ibyIsImxlbmd0aCIsInZhbHVlIiwicGFydGlhbHMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxXQUFXLEdBQUdDLE9BQU8sa0JBQXpCO0FBQUEsSUFDSUMsZ0JBQWdCLEdBQUdELE9BQU8sdUJBRDlCO0FBQUEsSUFFSUUsY0FBYyxHQUFHRixPQUFPLHFCQUY1Qjs7QUFLQSxJQUFJRyxXQUFXLEdBQUcsd0JBQWxCO0FBR0EsSUFBSUMsY0FBYyxHQUFHLENBQXJCO0FBQUEsSUFDSUMsa0JBQWtCLEdBQUcsQ0FEekI7QUFBQSxJQUVJQyxxQkFBcUIsR0FBRyxDQUY1QjtBQUFBLElBR0lDLGVBQWUsR0FBRyxDQUh0QjtBQUFBLElBSUlDLGFBQWEsR0FBRyxHQUpwQjtBQUFBLElBS0lDLGVBQWUsR0FBRyxHQUx0QjtBQVFBLElBQUlDLFNBQVMsR0FBR0MsSUFBSSxDQUFDQyxHQUFyQjs7QUFrQkEsU0FBU0MsU0FBVCxDQUFtQkMsSUFBbkIsRUFBeUJDLE1BQXpCLEVBQWlDO0FBQy9CLE1BQUlDLE9BQU8sR0FBR0YsSUFBSSxDQUFDLENBQUQsQ0FBbEI7QUFBQSxNQUNJRyxVQUFVLEdBQUdGLE1BQU0sQ0FBQyxDQUFELENBRHZCO0FBQUEsTUFFSUcsVUFBVSxH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RUFBQUEsSUFBSSxDQUFDLENBQUQsQ0FBSixHQUFVQyxNQUFNLENBQUMsQ0FBRCxDQUFoQjtBQUNBRCxFQUFBQSxJQUFJLENBQUMsQ0FBRCxDQUFKLEdBQVVJLFVBQVY7QUFFQSxTQUFPSixJQUFQO0FBQ0Q7O0FBRURVLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlosU0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY29tcG9zZUFyZ3MgPSByZXF1aXJlKCcuL19jb21wb3NlQXJncycpLFxuICAgIGNvbXBvc2VBcmdzUmlnaHQgPSByZXF1aXJlKCcuL19jb21wb3NlQXJnc1JpZ2h0JyksXG4gICAgcmVwbGFjZUhvbGRlcnMgPSByZXF1aXJlKCcuL19yZXBsYWNlSG9sZGVycycpO1xuXG4vKiogVXNlZCBhcyB0aGUgaW50ZXJuYWwgYXJndW1lbnQgcGxhY2Vob2xkZXIuICovXG52YXIgUExBQ0VIT0xERVIgPSAnX19sb2Rhc2hfcGxhY2Vob2xkZXJfXyc7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGZ1bmN0aW9uIG1ldGFkYXRhLiAqL1xudmFyIFdSQVBfQklORF9GTEFHID0gMSxcbiAgICBXUkFQX0JJTkRfS0VZX0ZMQUcgPSAyLFxuICAgIFdSQVBfQ1VSUllfQk9VTkRfRkxBRyA9IDQsXG4gICAgV1JBUF9DVVJSWV9GTEFHID0gOCxcbiAgICBXUkFQX0FSWV9GTEFHID0gMTI4LFxuICAgIFdSQVBfUkVBUkdfRkxBRyA9IDI1NjtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIE1lcmdlcyB0aGUgZnVuY3Rpb24gbWV0YWRhdGEgb2YgYHNvdXJjZWAgaW50byBgZGF0YWAuXG4gKlxuICogTWVyZ2luZyBtZXRhZGF0YSByZWR1Y2VzIHRoZSBudW1iZXIgb2Ygd3JhcHBlcnMgdXNlZCB0byBpbnZva2UgYSBmdW5jdGlvbi5cbiAqIFRoaXMgaXMgcG9zc2libGUgYmVjYXVzZSBtZXRob2RzIGxpa2UgYF8uYmluZGAsIGBfLmN1cnJ5YCwgYW5kIGBfLnBhcnRpYWxgXG4gKiBtYXkgYmUgYXBwbGllZCByZWdhcmRsZXNzIG9mIGV4ZWN1dGlvbiBvcmRlci4gTWV0aG9kcyBsaWtlIGBfLmFyeWAgYW5kXG4gKiBgXy5yZWFyZ2AgbW9kaWZ5IGZ1bmN0aW9uIGFyZ3VtZW50cywgbWFraW5nIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IGFyZVxuICogZXhlY3V0ZWQgaW1wb3J0YW50LCBwcmV2ZW50aW5nIHRoZSBtZXJnaW5nIG9mIG1ldGFkYXRhLiBIb3dldmVyLCB3ZSBtYWtlXG4gKiBhbiBleGNlcHRpb24gZm9yIGEgc2FmZSBjb21iaW5lZCBjYXNlIHdoZXJlIGN1cnJpZWQgZnVuY3Rpb25zIGhhdmUgYF8uYXJ5YFxuICogYW5kIG9yIGBfLnJlYXJnYCBhcHBsaWVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBkYXRhIFRoZSBkZXN0aW5hdGlvbiBtZXRhZGF0YS5cbiAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZSBUaGUgc291cmNlIG1ldGFkYXRhLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBkYXRhYC5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VEYXRhKGRhdGEsIHNvdXJjZSkge1xuICB2YXIgYml0bWFzayA9IGRhdGFbMV0sXG4gICAgICBzcmNCaXRtYXNrID0gc291cmNlWzFdLFxuICAgICAgbmV3Qml0bWFzayA9IGJpdG1hc2sgfCBzcmNCaXRtYXNrLFxuICAgICAgaXNDb21tb24gPSBuZXdCaXRtYXNrIDwgKFdSQVBfQklORF9GTEFHIHwgV1JBUF9CSU5EX0tFWV9GTEFHIHwgV1JBUF9BUllfRkxBRyk7XG5cbiAgdmFyIGlzQ29tYm8gPVxuICAgICgoc3JjQml0bWFzayA9PSBXUkFQX0FSWV9GTEFHKSAmJiAoYml0bWFzayA9PSBXUkFQX0NVUlJZX0ZMQUcpKSB8fFxuICAgICgoc3JjQml0bWFzayA9PSBXUkFQX0FSWV9GTEFHKSAmJiAoYml0bWFzayA9PSBXUkFQX1JFQVJHX0ZMQUcpICYmIChkYXRhWzddLmxlbmd0aCA8PSBzb3VyY2VbOF0pKSB8fFxuICAgICgoc3JjQml0bWFzayA9PSAoV1JBUF9BUllfRkxBRyB8IFdSQVBfUkVBUkdfRkxBRykpICYmIChzb3VyY2VbN10ubGVuZ3RoIDw9IHNvdXJjZVs4XSkgJiYgKGJpdG1hc2sgPT0gV1JBUF9DVVJSWV9GTEFHKSk7XG5cbiAgLy8gRXhpdCBlYXJseSBpZiBtZXRhZGF0YSBjYW4ndCBiZSBtZXJnZWQuXG4gIGlmICghKGlzQ29tbW9uIHx8IGlzQ29tYm8pKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgLy8gVXNlIHNvdXJjZSBgdGhpc0FyZ2AgaWYgYXZhaWxhYmxlLlxuICBpZiAoc3JjQml0bWFzayAmIFdSQVBfQklORF9GTEFHKSB7XG4gICAgZGF0YVsyXSA9IHNvdXJjZVsyXTtcbiAgICAvLyBTZXQgd2hlbiBjdXJyeWluZyBhIGJvdW5kIGZ1bmN0aW9uLlxuICAgIG5ld0JpdG1hc2sgfD0gYml0bWFzayAmIFdSQVBfQklORF9GTEFHID8gMCA6IFdSQVBfQ1VSUllfQk9VTkRfRkxBRztcbiAgfVxuICAvLyBDb21wb3NlIHBhcnRpYWwgYXJndW1lbnRzLlxuICB2YXIgdmFsdWUgPSBzb3VyY2VbM107XG4gIGlmICh2YWx1ZSkge1xuICAgIHZhciBwYXJ0aWFscyA9IGRhdGFbM107XG4gICAgZGF0YVszXSA9IHBhcnRpYWxzID8gY29tcG9zZUFyZ3MocGFydGlhbHMsIHZhbHVlLCBzb3VyY2VbNF0pIDogdmFsdWU7XG4gICAgZGF0YVs0XSA9IHBhcnRpYWxzID8gcmVwbGFjZUhvbGRlcnMoZGF0YVszXSwgUExBQ0VIT0xERVIpIDogc291cmNlWzRdO1xuICB9XG4gIC8vIENvbXBvc2UgcGFydGlhbCByaWdodCBhcmd1bWVudHMuXG4gIHZhbHVlID0gc291cmNlWzVdO1xuICBpZiAodmFsdWUpIHtcbiAgICBwYXJ0aWFscyA9IGRhdGFbNV07XG4gICAgZGF0YVs1XSA9IHBhcnRpYWxzID8gY29tcG9zZUFyZ3NSaWdodChwYXJ0aWFscywgdmFsdWUsIHNvdXJjZVs2XSkgOiB2YWx1ZTtcbiAgICBkYXRhWzZdID0gcGFydGlhbHMgPyByZXBsYWNlSG9sZGVycyhkYXRhWzVdLCBQTEFDRUhPTERFUikgOiBzb3VyY2VbNl07XG4gIH1cbiAgLy8gVXNlIHNvdXJjZSBgYXJnUG9zYCBpZiBhdmFpbGFibGUuXG4gIHZhbHVlID0gc291cmNlWzddO1xuICBpZiAodmFsdWUpIHtcbiAgICBkYXRhWzddID0gdmFsdWU7XG4gIH1cbiAgLy8gVXNlIHNvdXJjZSBgYXJ5YCBpZiBpdCdzIHNtYWxsZXIuXG4gIGlmIChzcmNCaXRtYXNrICYgV1JBUF9BUllfRkxBRykge1xuICAgIGRhdGFbOF0gPSBkYXRhWzhdID09IG51bGwgPyBzb3VyY2VbOF0gOiBuYXRpdmVNaW4oZGF0YVs4XSwgc291cmNlWzhdKTtcbiAgfVxuICAvLyBVc2Ugc291cmNlIGBhcml0eWAgaWYgb25lIGlzIG5vdCBwcm92aWRlZC5cbiAgaWYgKGRhdGFbOV0gPT0gbnVsbCkge1xuICAgIGRhdGFbOV0gPSBzb3VyY2VbOV07XG4gIH1cbiAgLy8gVXNlIHNvdXJjZSBgZnVuY2AgYW5kIG1lcmdlIGJpdG1hc2tzLlxuICBkYXRhWzBdID0gc291cmNlWzBdO1xuICBkYXRhWzFdID0gbmV3Qml0bWFzaztcblxuICByZXR1cm4gZGF0YTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtZXJnZURhdGE7XG4iXX0=