e217bb0d7ddd84b609ef7d6c6c591894
'use strict';

var GetIntrinsic = require("../GetIntrinsic");

var $TypeError = GetIntrinsic('%TypeError%');
var $Number = GetIntrinsic('%Number%');
var $RegExp = GetIntrinsic('%RegExp%');
var $parseInteger = GetIntrinsic('%parseInt%');

var callBound = require("../helpers/callBound");

var regexTester = require("../helpers/regexTester");

var isPrimitive = require("../helpers/isPrimitive");

var $strSlice = callBound('String.prototype.slice');
var isBinary = regexTester(/^0b[01]+$/i);
var isOctal = regexTester(/^0o[0-7]+$/i);
var isInvalidHexLiteral = regexTester(/^[-+]0x[0-9a-f]+$/i);
var nonWS = ["\x85", "\u200B", "\uFFFE"].join('');
var nonWSregex = new $RegExp('[' + nonWS + ']', 'g');
var hasNonWS = regexTester(nonWSregex);
var ws = ["\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003", "\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028", "\u2029\uFEFF"].join('');
var trimRegex = new RegExp('(^[' + ws + ']+)|([' + ws + ']+$)', 'g');
var $replace = callBound('String.prototype.replace');

var $trim = function $trim(value) {
  return $replace(value, trimRegex, '');
};

var ToPrimitive = require("./ToPrimitive");

module.exports = function ToNumber(argument) {
  var value = isPrimitive(argument) ? argument : ToPrimitive(argument, $Number);

  if (typeof value === 'symbol') {
    throw new $TypeError('Cannot convert a Symbol value to a number');
  }

  if (typeof value === 'string') {
    if (isBinary(value)) {
      return ToNumber($parseInteger($strSlice(value, 2), 2));
    } else if (isOctal(value)) {
      return ToNumber($parseInteger($strSlice(value, 2), 8));
    } else if (hasNonWS(value) || isInvalidHexLiteral(value)) {
      return NaN;
    } else {
      var trimmed = $trim(value);

      if (trimmed !== value) {
        return ToNumber(trimmed);
      }
    }
  }

  return $Number(value);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvTnVtYmVyLmpzIl0sIm5hbWVzIjpbIkdldEludHJpbnNpYyIsInJlcXVpcmUiLCIkVHlwZUVycm9yIiwiJE51bWJlciIsIiRSZWdFeHAiLCIkcGFyc2VJbnRlZ2VyIiwiY2FsbEJvdW5kIiwicmVnZXhUZXN0ZXIiLCJpc1ByaW1pdGl2ZSIsIiRzdHJTbGljZSIsImlzQmluYXJ5IiwiaXNPY3RhbCIsImlzSW52YWxpZEhleExpdGVyYWwiLCJub25XUyIsImpvaW4iLCJub25XU3JlZ2V4IiwiaGFzTm9uV1MiLCJ3cyIsInRyaW1SZWdleCIsIlJlZ0V4cCIsIiRyZXBsYWNlIiwiJHRyaW0iLCJ2YWx1ZSIsIlRvUHJpbWl0aXZlIiwibW9kdWxlIiwiZXhwb3J0cyIsIlRvTnVtYmVyIiwiYXJndW1lbnQiLCJOYU4iLCJ0cmltbWVkIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFJQSxZQUFZLEdBQUdDLE9BQU8sbUJBQTFCOztBQUVBLElBQUlDLFVBQVUsR0FBR0YsWUFBWSxDQUFDLGFBQUQsQ0FBN0I7QUFDQSxJQUFJRyxPQUFPLEdBQUdILFlBQVksQ0FBQyxVQUFELENBQTFCO0FBQ0EsSUFBSUksT0FBTyxHQUFHSixZQUFZLENBQUMsVUFBRCxDQUExQjtBQUNBLElBQUlLLGFBQWEsR0FBR0wsWUFBWSxDQUFDLFlBQUQsQ0FBaEM7O0FBRUEsSUFBSU0sU0FBUyxHQUFHTCxPQUFPLHdCQUF2Qjs7QUFDQSxJQUFJTSxXQUFXLEdBQUdOLE9BQU8sMEJBQXpCOztBQUNBLElBQUlPLFdBQVcsR0FBR1AsT0FBTywwQkFBekI7O0FBRUEsSUFBSVEsU0FBUyxHQUFHSCxTQUFTLENBQUMsd0JBQUQsQ0FBekI7QUFDQSxJQUFJSSxRQUFRLEdBQUdILFdBQVcsQ0FBQyxZQUFELENBQTFCO0FBQ0EsSUFBSUksT0FBTyxHQUFHSixXQUFXLENBQUMsYUFBRCxDQUF6QjtBQUNBLElBQUlLLG1CQUFtQixHQUFHTCxXQUFXLENBQUMsb0JBQUQsQ0FBckM7QUFDQSxJQUFJTSxLQUFLLEdBQUcsQ0FBQyxNQUFELEVBQVcsUUFBWCxFQUFxQixRQUFyQixFQUErQkMsSUFBL0IsQ0FBb0MsRUFBcEMsQ0FBWjtBQUNBLElBQUlDLFVBQVUsR0FBRyxJQUFJWCxPQUFKLENBQVksTUFBTVMsS0FBTixHQUFjLEdBQTFCLEVBQStCLEdBQS9CLENBQWpCO0FBQ0EsSUFBSUcsUUFBUSxHQUFHVCxXQUFXLENBQUNRLFVBQUQsQ0FBMUI7QUFJQSxJQUFJRSxFQUFFLEdBQUcsQ0FDUix1REFEUSxFQUVSLG9FQUZRLEVBR1IsY0FIUSxFQUlQSCxJQUpPLENBSUYsRUFKRSxDQUFUO0FBS0EsSUFBSUksU0FBUyxHQUFHLElBQUlDLE1BQUosQ0FBVyxRQUFRRixFQUFSLEdBQWEsUUFBYixHQUF3QkEsRUFBeEIsR0FBNkIsTUFBeEMsRUFBZ0QsR0FBaEQsQ0FBaEI7QUFDQSxJQUFJRyxRQUFRLEdBQUdkLFNBQVMsQ0FBQywwQkFBRCxDQUF4Qjs7QUFDQSxJQUFJZSxLQUFLLEdBQUcsU0FBUkEsS0FBUSxDQUFVQyxLQUFWLEVBQWlCO0FBQzVCLFNBQU9GLFFBQVEsQ0FBQ0UsS0FBRCxFQUFRSixTQUFSLEVBQW1CLEVBQW5CLENBQWY7QUFDQSxDQUZEOztBQUlBLElBQUlLLFdBQVcsR0FBR3RCLE9BQU8saUJBQXpCOztBQUlBdUIsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFNBQVNDLFFBQVQsQ0FBa0JDLFFBQWxCLEVBQTRCO0FBQzVDLE1BQUlMLEtBQUssR0FBR2QsV0FBVyxDQUFDbUIsUUFBRCxDQUFYLEdBQXdCQSxRQUF4QixHQUFtQ0osV0FBVyxDQUFDSSxRQUFELEVBQVd4QixPQUFYLENBQTFEOztBQUNBLE1BQUksT0FBT21CLEtBQVAsS0FBaUIsUUFBckIsRUFBK0I7QUFDOUIsVUFBTSxJQUFJcEIsVUFBSixDQUFlLDJDQUFmLENBQU47QUFDQTs7QUFDRCxNQUFJLE9BQU9vQixLQUFQLEtBQWlCLFFBQXJCLEVBQStCO0FBQzlCLFFBQUlaLFFBQVEsQ0FBQ1ksS0FBRCxDQUFaLEVBQXFCO0FBQ3BCLGFBQU9JLFFBQVEsQ0FBQ3JCLGFBQWEsQ0FBQ0ksU0FBUyxDQUFDYSxLQUFELEVBQVEsQ0FBUixDQUFWLEVBQXNCLENBQXRCLENBQWQsQ0FBZjtBQUNBLEtBRkQsTUFFTyxJQUFJWCxPQUFPLENBQUNXLEtBQUQsQ0FBWCxFQUFvQjtBQUMxQixhQUFPSSxRQUFRLENBQUNyQixhQUFhLENBQUNJLFNBQVMsQ0FBQ2EsS0FBRCxFQUFRLENBQVIsQ0FBVixFQUFzQixDQUF0QixDQUFkLENBQWY7QUFDQSxLQUZNLE1BRUEsSUFBSU4sUUFBUSxDQUFDTSxLQUFELENBQVIsSUFBbUJWLG1CQUFtQixDQUFDVSxLQUFELENBQTFDLEVBQW1EO0FBQ3pELGFBQU9NLEdBQVA7QUFDQSxLQUZNLE1BRUE7QUFDTixVQUFJQyxPQUFPLEdBQUdSLEtBQUssQ0FBQ0MsS0FBRCxDQUFuQjs7QUFDQSxVQUFJTyxPQUFPLEtBQUtQLEtBQWhCLEVBQXVCO0FBQ3RCLGVBQU9JLFFBQVEsQ0FBQ0csT0FBRCxDQUFmO0FBQ0E7QUFDRDtBQUNEOztBQUNELFNBQU8xQixPQUFPLENBQUNtQixLQUFELENBQWQ7QUFDQSxDQXBCRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIEdldEludHJpbnNpYyA9IHJlcXVpcmUoJy4uL0dldEludHJpbnNpYycpO1xuXG52YXIgJFR5cGVFcnJvciA9IEdldEludHJpbnNpYygnJVR5cGVFcnJvciUnKTtcbnZhciAkTnVtYmVyID0gR2V0SW50cmluc2ljKCclTnVtYmVyJScpO1xudmFyICRSZWdFeHAgPSBHZXRJbnRyaW5zaWMoJyVSZWdFeHAlJyk7XG52YXIgJHBhcnNlSW50ZWdlciA9IEdldEludHJpbnNpYygnJXBhcnNlSW50JScpO1xuXG52YXIgY2FsbEJvdW5kID0gcmVxdWlyZSgnLi4vaGVscGVycy9jYWxsQm91bmQnKTtcbnZhciByZWdleFRlc3RlciA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvcmVnZXhUZXN0ZXInKTtcbnZhciBpc1ByaW1pdGl2ZSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvaXNQcmltaXRpdmUnKTtcblxudmFyICRzdHJTbGljZSA9IGNhbGxCb3VuZCgnU3RyaW5nLnByb3RvdHlwZS5zbGljZScpO1xudmFyIGlzQmluYXJ5ID0gcmVnZXhUZXN0ZXIoL14wYlswMV0rJC9pKTtcbnZhciBpc09jdGFsID0gcmVnZXhUZXN0ZXIoL14wb1swLTddKyQvaSk7XG52YXIgaXNJbnZhbGlkSGV4TGl0ZXJhbCA9IHJlZ2V4VGVzdGVyKC9eWy0rXTB4WzAtOWEtZl0rJC9pKTtcbnZhciBub25XUyA9IFsnXFx1MDA4NScsICdcXHUyMDBiJywgJ1xcdWZmZmUnXS5qb2luKCcnKTtcbnZhciBub25XU3JlZ2V4ID0gbmV3ICRSZWdFeHAoJ1snICsgbm9uV1MgKyAnXScsICdnJyk7XG52YXIgaGFzTm9uV1MgPSByZWdleFRlc3Rlcihub25XU3JlZ2V4KTtcblxuLy8gd2hpdGVzcGFjZSBmcm9tOiBodHRwczovL2VzNS5naXRodWIuaW8vI3gxNS41LjQuMjBcbi8vIGltcGxlbWVudGF0aW9uIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGltL2Jsb2IvdjMuNC4wL2VzNS1zaGltLmpzI0wxMzA0LUwxMzI0XG52YXIgd3MgPSBbXG5cdCdcXHgwOVxceDBBXFx4MEJcXHgwQ1xceDBEXFx4MjBcXHhBMFxcdTE2ODBcXHUxODBFXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwMycsXG5cdCdcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBBXFx1MjAyRlxcdTIwNUZcXHUzMDAwXFx1MjAyOCcsXG5cdCdcXHUyMDI5XFx1RkVGRidcbl0uam9pbignJyk7XG52YXIgdHJpbVJlZ2V4ID0gbmV3IFJlZ0V4cCgnKF5bJyArIHdzICsgJ10rKXwoWycgKyB3cyArICddKyQpJywgJ2cnKTtcbnZhciAkcmVwbGFjZSA9IGNhbGxCb3VuZCgnU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlJyk7XG52YXIgJHRyaW0gPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0cmV0dXJuICRyZXBsYWNlKHZhbHVlLCB0cmltUmVnZXgsICcnKTtcbn07XG5cbnZhciBUb1ByaW1pdGl2ZSA9IHJlcXVpcmUoJy4vVG9QcmltaXRpdmUnKTtcblxuLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10b251bWJlclxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIFRvTnVtYmVyKGFyZ3VtZW50KSB7XG5cdHZhciB2YWx1ZSA9IGlzUHJpbWl0aXZlKGFyZ3VtZW50KSA/IGFyZ3VtZW50IDogVG9QcmltaXRpdmUoYXJndW1lbnQsICROdW1iZXIpO1xuXHRpZiAodHlwZW9mIHZhbHVlID09PSAnc3ltYm9sJykge1xuXHRcdHRocm93IG5ldyAkVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCBhIFN5bWJvbCB2YWx1ZSB0byBhIG51bWJlcicpO1xuXHR9XG5cdGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdFx0aWYgKGlzQmluYXJ5KHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuIFRvTnVtYmVyKCRwYXJzZUludGVnZXIoJHN0clNsaWNlKHZhbHVlLCAyKSwgMikpO1xuXHRcdH0gZWxzZSBpZiAoaXNPY3RhbCh2YWx1ZSkpIHtcblx0XHRcdHJldHVybiBUb051bWJlcigkcGFyc2VJbnRlZ2VyKCRzdHJTbGljZSh2YWx1ZSwgMiksIDgpKTtcblx0XHR9IGVsc2UgaWYgKGhhc05vbldTKHZhbHVlKSB8fCBpc0ludmFsaWRIZXhMaXRlcmFsKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuIE5hTjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHRyaW1tZWQgPSAkdHJpbSh2YWx1ZSk7XG5cdFx0XHRpZiAodHJpbW1lZCAhPT0gdmFsdWUpIHtcblx0XHRcdFx0cmV0dXJuIFRvTnVtYmVyKHRyaW1tZWQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gJE51bWJlcih2YWx1ZSk7XG59O1xuIl19