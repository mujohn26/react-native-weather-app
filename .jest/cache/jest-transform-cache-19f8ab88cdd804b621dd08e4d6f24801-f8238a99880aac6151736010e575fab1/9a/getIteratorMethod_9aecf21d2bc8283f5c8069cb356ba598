9a39436497d16299ee26a069c5978da3
'use strict';

var hasSymbols = require('has-symbols')();

var GetIntrinsic = require("../GetIntrinsic");

var callBound = require("./callBound");

var $iterator = GetIntrinsic('%Symbol.iterator%', true);
var $stringSlice = callBound('String.prototype.slice');

module.exports = function getIteratorMethod(ES, iterable) {
  var usingIterator;

  if (hasSymbols) {
    usingIterator = ES.GetMethod(iterable, $iterator);
  } else if (ES.IsArray(iterable)) {
    usingIterator = function usingIterator() {
      var i = -1;
      var arr = this;
      return {
        next: function next() {
          i += 1;
          return {
            done: i >= arr.length,
            value: arr[i]
          };
        }
      };
    };
  } else if (ES.Type(iterable) === 'String') {
    usingIterator = function usingIterator() {
      var i = 0;
      return {
        next: function next() {
          var nextIndex = ES.AdvanceStringIndex(iterable, i, true);
          var value = $stringSlice(iterable, i, nextIndex);
          i = nextIndex;
          return {
            done: nextIndex > iterable.length,
            value: value
          };
        }
      };
    };
  }

  return usingIterator;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldEl0ZXJhdG9yTWV0aG9kLmpzIl0sIm5hbWVzIjpbImhhc1N5bWJvbHMiLCJyZXF1aXJlIiwiR2V0SW50cmluc2ljIiwiY2FsbEJvdW5kIiwiJGl0ZXJhdG9yIiwiJHN0cmluZ1NsaWNlIiwibW9kdWxlIiwiZXhwb3J0cyIsImdldEl0ZXJhdG9yTWV0aG9kIiwiRVMiLCJpdGVyYWJsZSIsInVzaW5nSXRlcmF0b3IiLCJHZXRNZXRob2QiLCJJc0FycmF5IiwiaSIsImFyciIsIm5leHQiLCJkb25lIiwibGVuZ3RoIiwidmFsdWUiLCJUeXBlIiwibmV4dEluZGV4IiwiQWR2YW5jZVN0cmluZ0luZGV4Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFJQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxhQUFELENBQVAsRUFBakI7O0FBQ0EsSUFBSUMsWUFBWSxHQUFHRCxPQUFPLG1CQUExQjs7QUFDQSxJQUFJRSxTQUFTLEdBQUdGLE9BQU8sZUFBdkI7O0FBRUEsSUFBSUcsU0FBUyxHQUFHRixZQUFZLENBQUMsbUJBQUQsRUFBc0IsSUFBdEIsQ0FBNUI7QUFDQSxJQUFJRyxZQUFZLEdBQUdGLFNBQVMsQ0FBQyx3QkFBRCxDQUE1Qjs7QUFFQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFNBQVNDLGlCQUFULENBQTJCQyxFQUEzQixFQUErQkMsUUFBL0IsRUFBeUM7QUFDekQsTUFBSUMsYUFBSjs7QUFDQSxNQUFJWCxVQUFKLEVBQWdCO0FBQ2ZXLElBQUFBLGFBQWEsR0FBR0YsRUFBRSxDQUFDRyxTQUFILENBQWFGLFFBQWIsRUFBdUJOLFNBQXZCLENBQWhCO0FBQ0EsR0FGRCxNQUVPLElBQUlLLEVBQUUsQ0FBQ0ksT0FBSCxDQUFXSCxRQUFYLENBQUosRUFBMEI7QUFDaENDLElBQUFBLGFBQWEsR0FBRyx5QkFBWTtBQUMzQixVQUFJRyxDQUFDLEdBQUcsQ0FBQyxDQUFUO0FBQ0EsVUFBSUMsR0FBRyxHQUFHLElBQVY7QUFDQSxhQUFPO0FBQ05DLFFBQUFBLElBQUksRUFBRSxnQkFBWTtBQUNqQkYsVUFBQUEsQ0FBQyxJQUFJLENBQUw7QUFDQSxpQkFBTztBQUNORyxZQUFBQSxJQUFJLEVBQUVILENBQUMsSUFBSUMsR0FBRyxDQUFDRyxNQURUO0FBRU5DLFlBQUFBLEtBQUssRUFBRUosR0FBRyxDQUFDRCxDQUFEO0FBRkosV0FBUDtBQUlBO0FBUEssT0FBUDtBQVNBLEtBWkQ7QUFhQSxHQWRNLE1BY0EsSUFBSUwsRUFBRSxDQUFDVyxJQUFILENBQVFWLFFBQVIsTUFBc0IsUUFBMUIsRUFBb0M7QUFDMUNDLElBQUFBLGFBQWEsR0FBRyx5QkFBWTtBQUMzQixVQUFJRyxDQUFDLEdBQUcsQ0FBUjtBQUNBLGFBQU87QUFDTkUsUUFBQUEsSUFBSSxFQUFFLGdCQUFZO0FBQ2pCLGNBQUlLLFNBQVMsR0FBR1osRUFBRSxDQUFDYSxrQkFBSCxDQUFzQlosUUFBdEIsRUFBZ0NJLENBQWhDLEVBQW1DLElBQW5DLENBQWhCO0FBQ0EsY0FBSUssS0FBSyxHQUFHZCxZQUFZLENBQUNLLFFBQUQsRUFBV0ksQ0FBWCxFQUFjTyxTQUFkLENBQXhCO0FBQ0FQLFVBQUFBLENBQUMsR0FBR08sU0FBSjtBQUNBLGlCQUFPO0FBQ05KLFlBQUFBLElBQUksRUFBRUksU0FBUyxHQUFHWCxRQUFRLENBQUNRLE1BRHJCO0FBRU5DLFlBQUFBLEtBQUssRUFBRUE7QUFGRCxXQUFQO0FBSUE7QUFUSyxPQUFQO0FBV0EsS0FiRDtBQWNBOztBQUNELFNBQU9SLGFBQVA7QUFDQSxDQW5DRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGhhc1N5bWJvbHMgPSByZXF1aXJlKCdoYXMtc3ltYm9scycpKCk7XG52YXIgR2V0SW50cmluc2ljID0gcmVxdWlyZSgnLi4vR2V0SW50cmluc2ljJyk7XG52YXIgY2FsbEJvdW5kID0gcmVxdWlyZSgnLi9jYWxsQm91bmQnKTtcblxudmFyICRpdGVyYXRvciA9IEdldEludHJpbnNpYygnJVN5bWJvbC5pdGVyYXRvciUnLCB0cnVlKTtcbnZhciAkc3RyaW5nU2xpY2UgPSBjYWxsQm91bmQoJ1N0cmluZy5wcm90b3R5cGUuc2xpY2UnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRJdGVyYXRvck1ldGhvZChFUywgaXRlcmFibGUpIHtcblx0dmFyIHVzaW5nSXRlcmF0b3I7XG5cdGlmIChoYXNTeW1ib2xzKSB7XG5cdFx0dXNpbmdJdGVyYXRvciA9IEVTLkdldE1ldGhvZChpdGVyYWJsZSwgJGl0ZXJhdG9yKTtcblx0fSBlbHNlIGlmIChFUy5Jc0FycmF5KGl0ZXJhYmxlKSkge1xuXHRcdHVzaW5nSXRlcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgaSA9IC0xO1xuXHRcdFx0dmFyIGFyciA9IHRoaXM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taW52YWxpZC10aGlzXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRuZXh0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0aSArPSAxO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRkb25lOiBpID49IGFyci5sZW5ndGgsXG5cdFx0XHRcdFx0XHR2YWx1ZTogYXJyW2ldXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9O1xuXHR9IGVsc2UgaWYgKEVTLlR5cGUoaXRlcmFibGUpID09PSAnU3RyaW5nJykge1xuXHRcdHVzaW5nSXRlcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRuZXh0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dmFyIG5leHRJbmRleCA9IEVTLkFkdmFuY2VTdHJpbmdJbmRleChpdGVyYWJsZSwgaSwgdHJ1ZSk7XG5cdFx0XHRcdFx0dmFyIHZhbHVlID0gJHN0cmluZ1NsaWNlKGl0ZXJhYmxlLCBpLCBuZXh0SW5kZXgpO1xuXHRcdFx0XHRcdGkgPSBuZXh0SW5kZXg7XG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdGRvbmU6IG5leHRJbmRleCA+IGl0ZXJhYmxlLmxlbmd0aCxcblx0XHRcdFx0XHRcdHZhbHVlOiB2YWx1ZVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fTtcblx0fVxuXHRyZXR1cm4gdXNpbmdJdGVyYXRvcjtcbn07XG4iXX0=