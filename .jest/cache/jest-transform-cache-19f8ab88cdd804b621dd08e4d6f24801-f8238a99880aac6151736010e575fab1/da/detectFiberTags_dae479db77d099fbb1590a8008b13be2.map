{"version":3,"sources":["../src/detectFiberTags.js"],"names":["container","global","inst","Tester","React","ReactDOM","SuspenseWrapper","fallback","module","supportsMode","supportsContext","supportsForwardRef","supportsMemo","supportsProfiler","supportsSuspense","supportsLazy","Cls","Ctx","FwdRef","LazyComponent","HostRoot","getFiber","ClassComponent","Fragment","FunctionalComponent","MemoSFC","MemoClass","HostPortal","HostComponent","HostText","Mode","ContextConsumer","ContextProvider","value","ForwardRef","Profiler","id","onRender","Suspense","Lazy","getLazyFiber"],"mappings":";;AAAA,IAAA,MAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AACA,IAAA,SAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;;AACA,IAAA,mBAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,SAAA,QAAA,CAAA,OAAA,EAA2B;AACzB,MAAMA,SAAS,GAAGC,MAAM,CAANA,QAAAA,CAAAA,aAAAA,CAAlB,KAAkBA,CAAlB;AACA,MAAIC,IAAI,GAAR,IAAA;;AAFyB,MAGnBC,MAHmB,GAAA,UAAA,gBAAA,EAAA;AAAA,IAAA,SAAA,CAAA,MAAA,EAAA,gBAAA,CAAA;;AAAA,QAAA,MAAA,GAAA,YAAA,CAAA,MAAA,CAAA;;AAAA,aAAA,MAAA,GAAA;AAAA,MAAA,eAAA,CAAA,IAAA,EAAA,MAAA,CAAA;;AAAA,aAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA;AAAA;;AAAA,IAAA,YAAA,CAAA,MAAA,EAAA,CAAA;AAAA,MAAA,GAAA,EAAA,QAAA;AAAA,MAAA,KAAA,EAAA,SAAA,MAAA,GAId;AACPD,QAAAA,IAAI,GAAJA,IAAAA;AACA,eAAA,OAAA;AACD;AAPsB,KAAA,CAAA,CAAA;;AAAA,WAAA,MAAA;AAAA,GAAA,CAGJE,MAAAA,CAAAA,SAAAA,CAAAA,CAHI,SAAA,CAAA;;AASzBC,EAAAA,SAAAA,CAAAA,SAAAA,CAAAA,CAAAA,MAAAA,CAAgBD,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAAhBC,MAAgBD,CAAhBC,EAAAA,SAAAA;;AACA,SAAOH,IAAI,CAAJA,mBAAAA,CAAP,KAAA;AACD;;AAED,SAAA,YAAA,CAAA,aAAA,EAAqC;AACnC,MAAMF,SAAS,GAAGC,MAAM,CAANA,QAAAA,CAAAA,aAAAA,CAAlB,KAAkBA,CAAlB;AACA,MAAIC,IAAI,GAF2B,IAEnC;;AAFmC,MAI7BC,MAJ6B,GAAA,UAAA,iBAAA,EAAA;AAAA,IAAA,SAAA,CAAA,MAAA,EAAA,iBAAA,CAAA;;AAAA,QAAA,OAAA,GAAA,YAAA,CAAA,MAAA,CAAA;;AAAA,aAAA,MAAA,GAAA;AAAA,MAAA,eAAA,CAAA,IAAA,EAAA,MAAA,CAAA;;AAAA,aAAA,OAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA;AAAA;;AAAA,IAAA,YAAA,CAAA,MAAA,EAAA,CAAA;AAAA,MAAA,GAAA,EAAA,QAAA;AAAA,MAAA,KAAA,EAAA,SAAA,MAAA,GAKxB;AACPD,QAAAA,IAAI,GAAJA,IAAAA;AACA,eAAOE,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAAP,aAAOA,CAAP;AACD;AARgC,KAAA,CAAA,CAAA;;AAAA,WAAA,MAAA;AAAA,GAAA,CAIdA,MAAAA,CAAAA,SAAAA,CAAAA,CAJc,SAAA,CAAA;;AAAA,MAW7BE,eAX6B,GAAA,UAAA,iBAAA,EAAA;AAAA,IAAA,SAAA,CAAA,eAAA,EAAA,iBAAA,CAAA;;AAAA,QAAA,OAAA,GAAA,YAAA,CAAA,eAAA,CAAA;;AAAA,aAAA,eAAA,GAAA;AAAA,MAAA,eAAA,CAAA,IAAA,EAAA,eAAA,CAAA;;AAAA,aAAA,OAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA;AAAA;;AAAA,IAAA,YAAA,CAAA,eAAA,EAAA,CAAA;AAAA,MAAA,GAAA,EAAA,QAAA;AAAA,MAAA,KAAA,EAAA,SAAA,MAAA,GAYxB;AACP,eAAO,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CACLF,MAAAA,CAAAA,SAAAA,CAAAA,CADK,QAAA,EAEL;AAAEG,UAAAA,QAAQ,EAAE;AAAZ,SAFK,EAGLH,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAHF,MAGEA,CAHK,CAAP;AAKD;AAlBgC,KAAA,CAAA,CAAA;;AAAA,WAAA,eAAA;AAAA,GAAA,CAWLA,MAAAA,CAAAA,SAAAA,CAAAA,CAXK,SAAA,CAAA;;AAoBnCC,EAAAA,SAAAA,CAAAA,SAAAA,CAAAA,CAAAA,MAAAA,CAAgBD,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAAhBC,eAAgBD,CAAhBC,EAAAA,SAAAA;;AACA,SAAOH,IAAI,CAAJA,mBAAAA,CAAP,KAAA;AACD;;AAEDM,MAAM,CAANA,OAAAA,GAAiB,SAAA,eAAA,GAA2B;AAC1C,MAAMC,YAAY,GAAG,OAAOL,MAAAA,CAAAA,SAAAA,CAAAA,CAAP,UAAA,KAArB,WAAA;AACA,MAAMM,eAAe,GAAG,OAAON,MAAAA,CAAAA,SAAAA,CAAAA,CAAP,aAAA,KAAxB,WAAA;AACA,MAAMO,kBAAkB,GAAG,OAAOP,MAAAA,CAAAA,SAAAA,CAAAA,CAAP,UAAA,KAA3B,WAAA;AACA,MAAMQ,YAAY,GAAG,OAAOR,MAAAA,CAAAA,SAAAA,CAAAA,CAAP,IAAA,KAArB,WAAA;AACA,MAAMS,gBAAgB,GAAG,OAAOT,MAAAA,CAAAA,SAAAA,CAAAA,CAAP,iBAAA,KAAA,WAAA,IAAkD,OAAOA,MAAAA,CAAAA,SAAAA,CAAAA,CAAP,QAAA,KAA3E,WAAA;AACA,MAAMU,gBAAgB,GAAG,OAAOV,MAAAA,CAAAA,SAAAA,CAAAA,CAAP,QAAA,KAAzB,WAAA;AACA,MAAMW,YAAY,GAAG,OAAOX,MAAAA,CAAAA,SAAAA,CAAAA,CAAP,IAAA,KAArB,WAAA;;AAEA,WAAA,EAAA,GAAc;AACZ,WAAA,IAAA;AAVwC;;AAAA,MAapCY,GAboC,GAAA,UAAA,iBAAA,EAAA;AAAA,IAAA,SAAA,CAAA,GAAA,EAAA,iBAAA,CAAA;;AAAA,QAAA,OAAA,GAAA,YAAA,CAAA,GAAA,CAAA;;AAAA,aAAA,GAAA,GAAA;AAAA,MAAA,eAAA,CAAA,IAAA,EAAA,GAAA,CAAA;;AAAA,aAAA,OAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA;AAAA;;AAAA,IAAA,YAAA,CAAA,GAAA,EAAA,CAAA;AAAA,MAAA,GAAA,EAAA,QAAA;AAAA,MAAA,KAAA,EAAA,SAAA,MAAA,GAc/B;AACP,eAAA,IAAA;AACD;AAhBuC,KAAA,CAAA,CAAA;;AAAA,WAAA,GAAA;AAAA,GAAA,CAaxBZ,MAAAA,CAAAA,SAAAA,CAAAA,CAbwB,SAAA,CAAA;;AAkB1C,MAAIa,GAAG,GAAP,IAAA;AACA,MAAIC,MAAM,GAAV,IAAA;AACA,MAAIC,aAAa,GAAjB,IAAA;;AACA,MAAA,eAAA,EAAqB;AACnBF,IAAAA,GAAG,GAAGb,MAAAA,CAAAA,SAAAA,CAAAA,CAANa,aAAMb,EAANa;AACD;;AACD,MAAA,kBAAA,EAAwB;AAGtBC,IAAAA,MAAM,GAAG,MAAA,CAAA,SAAA,CAAA,CAAA,UAAA,CAAiB,UAAA,KAAA,EAAA,GAAA,EAAA;AAAA,aAAA,IAAA;AAA1BA,KAAS,CAATA;AACD;;AACD,MAAA,YAAA,EAAkB;AAChBC,IAAAA,aAAa,GAAG,MAAA,CAAA,SAAA,CAAA,CAAA,IAAA,CAAW,YAAA;AAAA,aAAM,CAAA,GAAA,mBAAA,CAAA,iBAAA,EAAkB,YAAA;AAAA,eAAA,IAAA;AAAxB,OAAM,CAAN;AAA3BA,KAAgB,CAAhBA;AACD;;AAED,SAAO;AACLC,IAAAA,QAAQ,EAAEC,QAAQ,CAARA,MAAQ,CAARA,CAAAA,QAAAA,EAAAA,QAAAA,EADL,GAAA;AAELC,IAAAA,cAAc,EAAED,QAAQ,CAACjB,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAATiB,GAASjB,CAAD,CAARiB,CAFX,GAAA;AAGLE,IAAAA,QAAQ,EAAEF,QAAQ,CAAC,CAAC,CAAVA,QAAU,CAAD,CAAD,CAARA,CAHL,GAAA;AAILG,IAAAA,mBAAmB,EAAEH,QAAQ,CAACjB,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAATiB,EAASjB,CAAD,CAARiB,CAJhB,GAAA;AAKLI,IAAAA,OAAO,EAAEb,YAAY,GACjBS,QAAQ,CAACjB,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAAoBA,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,IAAAA,CAA7BiB,EAA6BjB,CAApBA,CAAD,CAARiB,CADiB,GAAA,GAEjB,CAPC,CAAA;AAQLK,IAAAA,SAAS,EAAEd,YAAY,GACnBS,QAAQ,CAACjB,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAAoBA,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,IAAAA,CAA7BiB,GAA6BjB,CAApBA,CAAD,CAARiB,CADmB,GAAA,GAEnB,CAVC,CAAA;AAWLM,IAAAA,UAAU,EAAEN,QAAQ,CAAChB,SAAAA,CAAAA,SAAAA,CAAAA,CAAAA,YAAAA,CAAAA,IAAAA,EAA4BJ,MAAM,CAANA,QAAAA,CAAAA,aAAAA,CAArCoB,KAAqCpB,CAA5BI,CAAD,CAARgB,CAXP,GAAA;AAYLO,IAAAA,aAAa,EAAEP,QAAQ,CAACjB,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAATiB,MAASjB,CAAD,CAARiB,CAZV,GAAA;AAaLQ,IAAAA,QAAQ,EAAER,QAAQ,CAARA,MAAQ,CAARA,CAbL,GAAA;AAcLS,IAAAA,IAAI,EAAErB,YAAY,GACdY,QAAQ,CAACjB,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAAoBA,MAAAA,CAAAA,SAAAA,CAAAA,CAA7BiB,UAASjB,CAAD,CAARiB,CADc,GAAA,GAEd,CAhBC,CAAA;AAiBLU,IAAAA,eAAe,EAAErB,eAAe,GAC5B,QAAQ,CAAC,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAoBO,GAAG,CAAvB,QAAA,EAAA,IAAA,EAAwC,YAAA;AAAA,aAAA,IAAA;AAAjD,KAAS,CAAD,CAAR,CAD4B,GAAA,GAE5B,CAnBC,CAAA;AAoBLe,IAAAA,eAAe,EAAEtB,eAAe,GAC5B,QAAQ,CAAC,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAoBO,GAAG,CAAvB,QAAA,EAAkC;AAAEgB,MAAAA,KAAK,EAAE;AAAT,KAAlC,EAAT,IAAS,CAAD,CAAR,CAD4B,GAAA,GAE5B,CAtBC,CAAA;AAuBLC,IAAAA,UAAU,EAAEvB,kBAAkB,GAC1BU,QAAQ,CAACjB,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAATiB,MAASjB,CAAD,CAARiB,CAD0B,GAAA,GAE1B,CAzBC,CAAA;AA0BLc,IAAAA,QAAQ,EAAEtB,gBAAgB,GACtB,QAAQ,CAAC,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAqBT,MAAAA,CAAAA,SAAAA,CAAAA,CAAAA,QAAAA,IAAkBA,MAAAA,CAAAA,SAAAA,CAAAA,CAAvC,iBAAA,EAAiE;AAAEgC,MAAAA,EAAE,EAAJ,MAAA;AAAcC,MAAAA,QAAd,EAAA,SAAA,QAAA,GAAyB,CAAE;AAA3B,KAAjE,CAAD,CAAR,CADsB,GAAA,GAEtB,CA5BC,CAAA;AA6BLC,IAAAA,QAAQ,EAAExB,gBAAgB,GACtB,QAAQ,CAAC,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAoBV,MAAAA,CAAAA,SAAAA,CAAAA,CAApB,QAAA,EAAoC;AAAEG,MAAAA,QAAQ,EAAE;AAAZ,KAApC,CAAD,CAAR,CADsB,GAAA,GAEtB,CA/BC,CAAA;AAgCLgC,IAAAA,IAAI,EAAExB,YAAY,GACdyB,YAAY,CAAZA,aAAY,CAAZA,CADc,GAAA,GAEd,CAAC;AAlCA,GAAP;AAjCFhC,CAAAA","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { fakeDynamicImport } from 'enzyme-adapter-utils';\n\nfunction getFiber(element) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return element;\n    }\n  }\n  ReactDOM.render(React.createElement(Tester), container);\n  return inst._reactInternalFiber.child;\n}\n\nfunction getLazyFiber(LazyComponent) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  // eslint-disable-next-line react/prefer-stateless-function\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return React.createElement(LazyComponent);\n    }\n  }\n  // eslint-disable-next-line react/prefer-stateless-function\n  class SuspenseWrapper extends React.Component {\n    render() {\n      return React.createElement(\n        React.Suspense,\n        { fallback: false },\n        React.createElement(Tester),\n      );\n    }\n  }\n  ReactDOM.render(React.createElement(SuspenseWrapper), container);\n  return inst._reactInternalFiber.child;\n}\n\nmodule.exports = function detectFiberTags() {\n  const supportsMode = typeof React.StrictMode !== 'undefined';\n  const supportsContext = typeof React.createContext !== 'undefined';\n  const supportsForwardRef = typeof React.forwardRef !== 'undefined';\n  const supportsMemo = typeof React.memo !== 'undefined';\n  const supportsProfiler = typeof React.unstable_Profiler !== 'undefined' || typeof React.Profiler !== 'undefined';\n  const supportsSuspense = typeof React.Suspense !== 'undefined';\n  const supportsLazy = typeof React.lazy !== 'undefined';\n\n  function Fn() {\n    return null;\n  }\n  // eslint-disable-next-line react/prefer-stateless-function\n  class Cls extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  let Ctx = null;\n  let FwdRef = null;\n  let LazyComponent = null;\n  if (supportsContext) {\n    Ctx = React.createContext();\n  }\n  if (supportsForwardRef) {\n    // React will warn if we don't have both arguments.\n    // eslint-disable-next-line no-unused-vars\n    FwdRef = React.forwardRef((props, ref) => null);\n  }\n  if (supportsLazy) {\n    LazyComponent = React.lazy(() => fakeDynamicImport(() => null));\n  }\n\n  return {\n    HostRoot: getFiber('test').return.return.tag, // Go two levels above to find the root\n    ClassComponent: getFiber(React.createElement(Cls)).tag,\n    Fragment: getFiber([['nested']]).tag,\n    FunctionalComponent: getFiber(React.createElement(Fn)).tag,\n    MemoSFC: supportsMemo\n      ? getFiber(React.createElement(React.memo(Fn))).tag\n      : -1,\n    MemoClass: supportsMemo\n      ? getFiber(React.createElement(React.memo(Cls))).tag\n      : -1,\n    HostPortal: getFiber(ReactDOM.createPortal(null, global.document.createElement('div'))).tag,\n    HostComponent: getFiber(React.createElement('span')).tag,\n    HostText: getFiber('text').tag,\n    Mode: supportsMode\n      ? getFiber(React.createElement(React.StrictMode)).tag\n      : -1,\n    ContextConsumer: supportsContext\n      ? getFiber(React.createElement(Ctx.Consumer, null, () => null)).tag\n      : -1,\n    ContextProvider: supportsContext\n      ? getFiber(React.createElement(Ctx.Provider, { value: null }, null)).tag\n      : -1,\n    ForwardRef: supportsForwardRef\n      ? getFiber(React.createElement(FwdRef)).tag\n      : -1,\n    Profiler: supportsProfiler\n      ? getFiber(React.createElement((React.Profiler || React.unstable_Profiler), { id: 'mock', onRender() {} })).tag\n      : -1,\n    Suspense: supportsSuspense\n      ? getFiber(React.createElement(React.Suspense, { fallback: false })).tag\n      : -1,\n    Lazy: supportsLazy\n      ? getLazyFiber(LazyComponent).tag\n      : -1,\n  };\n};\n"]}