{"version":3,"sources":["shallow.js"],"names":["Object","defineProperty","exports","value","default","_omitBy","_interopRequireDefault","require","_isNil","_reactIs","_RSTTraversal","_utils","obj","__esModule","getChildren","node","options","children","compact","childrenOfNode","map","n","internalNodeToJson","length","getProps","props","propsOfNode","val","key","undefined","ignoreDefaultProps","isValidElementType","type","defaultProps","noKey","json","applyMap","extractTypeName","$$typeof","Symbol","for","shallowToJson","wrapper","getNodesInternal","nodes","getNodeInternal","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _omitBy = _interopRequireDefault(require(\"lodash/omitBy\"));\n\nvar _isNil = _interopRequireDefault(require(\"lodash/isNil\"));\n\nvar _reactIs = require(\"react-is\");\n\nvar _RSTTraversal = require(\"enzyme/build/RSTTraversal\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getChildren(node, options) {\n  const children = (0, _utils.compact)((0, _RSTTraversal.childrenOfNode)(node).map(n => internalNodeToJson(n, options)));\n\n  if (children.length > 0) {\n    return children;\n  }\n\n  return null;\n}\n\nfunction getProps(node, options) {\n  const props = (0, _omitBy.default)(Object.assign({}, (0, _RSTTraversal.propsOfNode)(node)), (val, key) => {\n    if (key === 'children' || val === undefined) {\n      return true;\n    }\n\n    if (options.ignoreDefaultProps === true && (0, _reactIs.isValidElementType)(node.type) && node.type.defaultProps && key in node.type.defaultProps && node.type.defaultProps[key] === val) {\n      return true;\n    }\n  });\n\n  if (!(0, _isNil.default)(node.key) && options.noKey !== true) {\n    props.key = node.key;\n  }\n\n  return props;\n}\n\nfunction internalNodeToJson(node, options) {\n  if (typeof node === 'string' || typeof node === 'number') {\n    return node;\n  }\n\n  if ((0, _isNil.default)(node) || node === false) {\n    return '';\n  }\n\n  const json = (0, _utils.applyMap)({\n    node,\n    type: (0, _utils.extractTypeName)(node),\n    props: getProps(node, options),\n    children: getChildren(node, options),\n    $$typeof: Symbol.for('react.test.json')\n  }, options);\n\n  if (!(0, _isNil.default)(json) && !(0, _isNil.default)(json.type)) {\n    return json;\n  }\n}\n\nconst shallowToJson = (wrapper, options = {}) => {\n  if ((0, _isNil.default)(wrapper) || wrapper.length === 0) {\n    return null;\n  }\n\n  if (wrapper.length > 1 && typeof wrapper.getNodesInternal === 'function') {\n    const nodes = wrapper.getNodesInternal();\n    return nodes.map(node => internalNodeToJson(node, options));\n  }\n\n  if (typeof wrapper.getNodeInternal === 'function') {\n    const node = wrapper.getNodeInternal();\n    return internalNodeToJson(node, options);\n  }\n\n  return null;\n};\n\nvar _default = shallowToJson;\nexports.default = _default;"]}