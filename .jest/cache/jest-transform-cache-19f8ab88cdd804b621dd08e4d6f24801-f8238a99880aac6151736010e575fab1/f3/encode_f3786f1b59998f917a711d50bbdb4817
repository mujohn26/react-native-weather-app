1716d4c7c3fe79d9973d69e84b91d7d7
"use strict";

var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.escape = exports.encodeHTML = exports.encodeXML = void 0;

var xml_json_1 = __importDefault(require("./maps/xml.json"));

var inverseXML = getInverseObj(xml_json_1.default);
var xmlReplacer = getInverseReplacer(inverseXML);
exports.encodeXML = getInverse(inverseXML, xmlReplacer);

var entities_json_1 = __importDefault(require("./maps/entities.json"));

var inverseHTML = getInverseObj(entities_json_1.default);
var htmlReplacer = getInverseReplacer(inverseHTML);
exports.encodeHTML = getInverse(inverseHTML, htmlReplacer);

function getInverseObj(obj) {
  return Object.keys(obj).sort().reduce(function (inverse, name) {
    inverse[obj[name]] = "&" + name + ";";
    return inverse;
  }, {});
}

function getInverseReplacer(inverse) {
  var single = [];
  var multiple = [];

  for (var _i = 0, _a = Object.keys(inverse); _i < _a.length; _i++) {
    var k = _a[_i];

    if (k.length === 1) {
      single.push("\\" + k);
    } else {
      multiple.push(k);
    }
  }

  single.sort();

  for (var start = 0; start < single.length - 1; start++) {
    var end = start;

    while (end < single.length - 1 && single[end].charCodeAt(1) + 1 === single[end + 1].charCodeAt(1)) {
      end += 1;
    }

    var count = 1 + end - start;
    if (count < 3) continue;
    single.splice(start, count, single[start] + "-" + single[end]);
  }

  multiple.unshift("[" + single.join("") + "]");
  return new RegExp(multiple.join("|"), "g");
}

var reNonASCII = /(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g;

function singleCharReplacer(c) {
  return "&#x" + c.codePointAt(0).toString(16).toUpperCase() + ";";
}

function getInverse(inverse, re) {
  return function (data) {
    return data.replace(re, function (name) {
      return inverse[name];
    }).replace(reNonASCII, singleCharReplacer);
  };
}

var reXmlChars = getInverseReplacer(inverseXML);

function escape(data) {
  return data.replace(reXmlChars, singleCharReplacer).replace(reNonASCII, singleCharReplacer);
}

exports.escape = escape;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuY29kZS5qcyJdLCJuYW1lcyI6WyJfX2ltcG9ydERlZmF1bHQiLCJtb2QiLCJfX2VzTW9kdWxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJlc2NhcGUiLCJlbmNvZGVIVE1MIiwiZW5jb2RlWE1MIiwieG1sX2pzb25fMSIsInJlcXVpcmUiLCJpbnZlcnNlWE1MIiwiZ2V0SW52ZXJzZU9iaiIsImRlZmF1bHQiLCJ4bWxSZXBsYWNlciIsImdldEludmVyc2VSZXBsYWNlciIsImdldEludmVyc2UiLCJlbnRpdGllc19qc29uXzEiLCJpbnZlcnNlSFRNTCIsImh0bWxSZXBsYWNlciIsIm9iaiIsImtleXMiLCJzb3J0IiwicmVkdWNlIiwiaW52ZXJzZSIsIm5hbWUiLCJzaW5nbGUiLCJtdWx0aXBsZSIsIl9pIiwiX2EiLCJsZW5ndGgiLCJrIiwicHVzaCIsInN0YXJ0IiwiZW5kIiwiY2hhckNvZGVBdCIsImNvdW50Iiwic3BsaWNlIiwidW5zaGlmdCIsImpvaW4iLCJSZWdFeHAiLCJyZU5vbkFTQ0lJIiwic2luZ2xlQ2hhclJlcGxhY2VyIiwiYyIsImNvZGVQb2ludEF0IiwidG9TdHJpbmciLCJ0b1VwcGVyQ2FzZSIsInJlIiwiZGF0YSIsInJlcGxhY2UiLCJyZVhtbENoYXJzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFDQSxJQUFJQSxlQUFlLEdBQUksUUFBUSxLQUFLQSxlQUFkLElBQWtDLFVBQVVDLEdBQVYsRUFBZTtBQUNuRSxTQUFRQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ0MsVUFBWixHQUEwQkQsR0FBMUIsR0FBZ0M7QUFBRSxlQUFXQTtBQUFiLEdBQXZDO0FBQ0gsQ0FGRDs7QUFHQUUsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztBQUFFQyxFQUFBQSxLQUFLLEVBQUU7QUFBVCxDQUE3QztBQUNBRCxPQUFPLENBQUNFLE1BQVIsR0FBaUJGLE9BQU8sQ0FBQ0csVUFBUixHQUFx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QVksRUFBWixDQUFOLEdBQXdCLEdBQXpDO0FBQ0EsU0FBTyxJQUFJQyxNQUFKLENBQVdiLFFBQVEsQ0FBQ1ksSUFBVCxDQUFjLEdBQWQsQ0FBWCxFQUErQixHQUEvQixDQUFQO0FBQ0g7O0FBQ0QsSUFBSUUsVUFBVSxHQUFHLHlJQUFqQjs7QUFDQSxTQUFTQyxrQkFBVCxDQUE0QkMsQ0FBNUIsRUFBK0I7QUFFM0IsU0FBTyxRQUFRQSxDQUFDLENBQUNDLFdBQUYsQ0FBYyxDQUFkLEVBQWlCQyxRQUFqQixDQUEwQixFQUExQixFQUE4QkMsV0FBOUIsRUFBUixHQUFzRCxHQUE3RDtBQUNIOztBQUNELFNBQVM5QixVQUFULENBQW9CUSxPQUFwQixFQUE2QnVCLEVBQTdCLEVBQWlDO0FBQzdCLFNBQU8sVUFBVUMsSUFBVixFQUFnQjtBQUNuQixXQUFPQSxJQUFJLENBQ05DLE9BREUsQ0FDTUYsRUFETixFQUNVLFVBQVV0QixJQUFWLEVBQWdCO0FBQUUsYUFBT0QsT0FBTyxDQUFDQyxJQUFELENBQWQ7QUFBdUIsS0FEbkQsRUFFRndCLE9BRkUsQ0FFTVIsVUFGTixFQUVrQkMsa0JBRmxCLENBQVA7QUFHSCxHQUpEO0FBS0g7O0FBQ0QsSUFBSVEsVUFBVSxHQUFHbkMsa0JBQWtCLENBQUNKLFVBQUQsQ0FBbkM7O0FBQ0EsU0FBU0wsTUFBVCxDQUFnQjBDLElBQWhCLEVBQXNCO0FBQ2xCLFNBQU9BLElBQUksQ0FDTkMsT0FERSxDQUNNQyxVQUROLEVBQ2tCUixrQkFEbEIsRUFFRk8sT0FGRSxDQUVNUixVQUZOLEVBRWtCQyxrQkFGbEIsQ0FBUDtBQUdIOztBQUNEdEMsT0FBTyxDQUFDRSxNQUFSLEdBQWlCQSxNQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5lc2NhcGUgPSBleHBvcnRzLmVuY29kZUhUTUwgPSBleHBvcnRzLmVuY29kZVhNTCA9IHZvaWQgMDtcbnZhciB4bWxfanNvbl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL21hcHMveG1sLmpzb25cIikpO1xudmFyIGludmVyc2VYTUwgPSBnZXRJbnZlcnNlT2JqKHhtbF9qc29uXzEuZGVmYXVsdCk7XG52YXIgeG1sUmVwbGFjZXIgPSBnZXRJbnZlcnNlUmVwbGFjZXIoaW52ZXJzZVhNTCk7XG5leHBvcnRzLmVuY29kZVhNTCA9IGdldEludmVyc2UoaW52ZXJzZVhNTCwgeG1sUmVwbGFjZXIpO1xudmFyIGVudGl0aWVzX2pzb25fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9tYXBzL2VudGl0aWVzLmpzb25cIikpO1xudmFyIGludmVyc2VIVE1MID0gZ2V0SW52ZXJzZU9iaihlbnRpdGllc19qc29uXzEuZGVmYXVsdCk7XG52YXIgaHRtbFJlcGxhY2VyID0gZ2V0SW52ZXJzZVJlcGxhY2VyKGludmVyc2VIVE1MKTtcbmV4cG9ydHMuZW5jb2RlSFRNTCA9IGdldEludmVyc2UoaW52ZXJzZUhUTUwsIGh0bWxSZXBsYWNlcik7XG5mdW5jdGlvbiBnZXRJbnZlcnNlT2JqKG9iaikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgICAgIC5zb3J0KClcbiAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAoaW52ZXJzZSwgbmFtZSkge1xuICAgICAgICBpbnZlcnNlW29ialtuYW1lXV0gPSBcIiZcIiArIG5hbWUgKyBcIjtcIjtcbiAgICAgICAgcmV0dXJuIGludmVyc2U7XG4gICAgfSwge30pO1xufVxuZnVuY3Rpb24gZ2V0SW52ZXJzZVJlcGxhY2VyKGludmVyc2UpIHtcbiAgICB2YXIgc2luZ2xlID0gW107XG4gICAgdmFyIG11bHRpcGxlID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGludmVyc2UpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgayA9IF9hW19pXTtcbiAgICAgICAgaWYgKGsubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvLyBBZGQgdmFsdWUgdG8gc2luZ2xlIGFycmF5XG4gICAgICAgICAgICBzaW5nbGUucHVzaChcIlxcXFxcIiArIGspO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gQWRkIHZhbHVlIHRvIG11bHRpcGxlIGFycmF5XG4gICAgICAgICAgICBtdWx0aXBsZS5wdXNoKGspO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFkZCByYW5nZXMgdG8gc2luZ2xlIGNoYXJhY3RlcnMuXG4gICAgc2luZ2xlLnNvcnQoKTtcbiAgICBmb3IgKHZhciBzdGFydCA9IDA7IHN0YXJ0IDwgc2luZ2xlLmxlbmd0aCAtIDE7IHN0YXJ0KyspIHtcbiAgICAgICAgLy8gRmluZCB0aGUgZW5kIG9mIGEgcnVuIG9mIGNoYXJhY3RlcnNcbiAgICAgICAgdmFyIGVuZCA9IHN0YXJ0O1xuICAgICAgICB3aGlsZSAoZW5kIDwgc2luZ2xlLmxlbmd0aCAtIDEgJiZcbiAgICAgICAgICAgIHNpbmdsZVtlbmRdLmNoYXJDb2RlQXQoMSkgKyAxID09PSBzaW5nbGVbZW5kICsgMV0uY2hhckNvZGVBdCgxKSkge1xuICAgICAgICAgICAgZW5kICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvdW50ID0gMSArIGVuZCAtIHN0YXJ0O1xuICAgICAgICAvLyBXZSB3YW50IHRvIHJlcGxhY2UgYXQgbGVhc3QgdGhyZWUgY2hhcmFjdGVyc1xuICAgICAgICBpZiAoY291bnQgPCAzKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIHNpbmdsZS5zcGxpY2Uoc3RhcnQsIGNvdW50LCBzaW5nbGVbc3RhcnRdICsgXCItXCIgKyBzaW5nbGVbZW5kXSk7XG4gICAgfVxuICAgIG11bHRpcGxlLnVuc2hpZnQoXCJbXCIgKyBzaW5nbGUuam9pbihcIlwiKSArIFwiXVwiKTtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChtdWx0aXBsZS5qb2luKFwifFwiKSwgXCJnXCIpO1xufVxudmFyIHJlTm9uQVNDSUkgPSAvKD86W1xceDgwLVxcdUQ3RkZcXHVFMDAwLVxcdUZGRkZdfFtcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl18W1xcdUQ4MDAtXFx1REJGRl0oPyFbXFx1REMwMC1cXHVERkZGXSl8KD86W15cXHVEODAwLVxcdURCRkZdfF4pW1xcdURDMDAtXFx1REZGRl0pL2c7XG5mdW5jdGlvbiBzaW5nbGVDaGFyUmVwbGFjZXIoYykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgcmV0dXJuIFwiJiN4XCIgKyBjLmNvZGVQb2ludEF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpICsgXCI7XCI7XG59XG5mdW5jdGlvbiBnZXRJbnZlcnNlKGludmVyc2UsIHJlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiBkYXRhXG4gICAgICAgICAgICAucmVwbGFjZShyZSwgZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIGludmVyc2VbbmFtZV07IH0pXG4gICAgICAgICAgICAucmVwbGFjZShyZU5vbkFTQ0lJLCBzaW5nbGVDaGFyUmVwbGFjZXIpO1xuICAgIH07XG59XG52YXIgcmVYbWxDaGFycyA9IGdldEludmVyc2VSZXBsYWNlcihpbnZlcnNlWE1MKTtcbmZ1bmN0aW9uIGVzY2FwZShkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGFcbiAgICAgICAgLnJlcGxhY2UocmVYbWxDaGFycywgc2luZ2xlQ2hhclJlcGxhY2VyKVxuICAgICAgICAucmVwbGFjZShyZU5vbkFTQ0lJLCBzaW5nbGVDaGFyUmVwbGFjZXIpO1xufVxuZXhwb3J0cy5lc2NhcGUgPSBlc2NhcGU7XG4iXX0=