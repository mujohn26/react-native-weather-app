3ac6c19f36b09d0ae32d46890c220b0d
var DomUtils = require("domutils"),
    isTag = DomUtils.isTag,
    getText = DomUtils.getText,
    getParent = DomUtils.getParent,
    getChildren = DomUtils.getChildren,
    getSiblings = DomUtils.getSiblings,
    hasAttrib = DomUtils.hasAttrib,
    getName = DomUtils.getName,
    getAttribute = DomUtils.getAttributeValue,
    getNCheck = require("nth-check"),
    checkAttrib = require("./attributes.js").rules.equals,
    BaseFuncs = require("boolbase"),
    trueFunc = BaseFuncs.trueFunc,
    falseFunc = BaseFuncs.falseFunc;

function getFirstElement(elems) {
  for (var i = 0; elems && i < elems.length; i++) {
    if (isTag(elems[i])) return elems[i];
  }
}

function getAttribFunc(name, value) {
  var data = {
    name: name,
    value: value
  };
  return function attribFunc(next) {
    return checkAttrib(next, data);
  };
}

function getChildFunc(next) {
  return function (elem) {
    return !!getParent(elem) && next(elem);
  };
}

var filters = {
  contains: function contains(next, text) {
    return function contains(elem) {
      return next(elem) && getText(elem).indexOf(text) >= 0;
    };
  },
  icontains: function icontains(next, text) {
    var itext = text.toLowerCase();
    return function icontains(elem) {
      return next(elem) && getText(elem).toLowerCase().indexOf(itext) >= 0;
    };
  },
  "nth-child": function nthChild(next, rule) {
    var func = getNCheck(rule);
    if (func === falseFunc) return func;
    if (func === trueFunc) return getChildFunc(next);
    return function nthChild(elem) {
      var siblings = getSiblings(elem);

      for (var i = 0, pos = 0; i < siblings.length; i++) {
        if (isTag(siblings[i])) {
          if (siblings[i] === elem) break;else pos++;
        }
      }

      return func(pos) && next(elem);
    };
  },
  "nth-last-child": function nthLastChild(next, rule) {
    var func = getNCheck(rule);
    if (func === falseFunc) return func;
    if (func === trueFunc) return getChildFunc(next);
    return function nthLastChild(elem) {
      var siblings = getSiblings(elem);

      for (var pos = 0, i = siblings.length - 1; i >= 0; i--) {
        if (isTag(siblings[i])) {
          if (siblings[i] === elem) break;else pos++;
        }
      }

      return func(pos) && next(elem);
    };
  },
  "nth-of-type": function nthOfType(next, rule) {
    var func = getNCheck(rule);
    if (func === falseFunc) return func;
    if (func === trueFunc) return getChildFunc(next);
    return function nthOfType(elem) {
      var siblings = getSiblings(elem);

      for (var pos = 0, i = 0; i < siblings.length; i++) {
        if (isTag(siblings[i])) {
          if (siblings[i] === elem) break;
          if (getName(siblings[i]) === getName(elem)) pos++;
        }
      }

      return func(pos) && next(elem);
    };
  },
  "nth-last-of-type": function nthLastOfType(next, rule) {
    var func = getNCheck(rule);
    if (func === falseFunc) return func;
    if (func === trueFunc) return getChildFunc(next);
    return function nthLastOfType(elem) {
      var siblings = getSiblings(elem);

      for (var pos = 0, i = siblings.length - 1; i >= 0; i--) {
        if (isTag(siblings[i])) {
          if (siblings[i] === elem) break;
          if (getName(siblings[i]) === getName(elem)) pos++;
        }
      }

      return func(pos) && next(elem);
    };
  },
  root: function root(next) {
    return function (elem) {
      return !getParent(elem) && next(elem);
    };
  },
  scope: function scope(next, rule, options, context) {
    if (!context || context.length === 0) {
      return filters.root(next);
    }

    if (context.length === 1) {
      return function (elem) {
        return context[0] === elem && next(elem);
      };
    }

    return function (elem) {
      return context.indexOf(elem) >= 0 && next(elem);
    };
  },
  checkbox: getAttribFunc("type", "checkbox"),
  file: getAttribFunc("type", "file"),
  password: getAttribFunc("type", "password"),
  radio: getAttribFunc("type", "radio"),
  reset: getAttribFunc("type", "reset"),
  image: getAttribFunc("type", "image"),
  submit: getAttribFunc("type", "submit")
};
var pseudos = {
  empty: function empty(elem) {
    return !getChildren(elem).some(function (elem) {
      return isTag(elem) || elem.type === "text";
    });
  },
  "first-child": function firstChild(elem) {
    return getFirstElement(getSiblings(elem)) === elem;
  },
  "last-child": function lastChild(elem) {
    var siblings = getSiblings(elem);

    for (var i = siblings.length - 1; i >= 0; i--) {
      if (siblings[i] === elem) return true;
      if (isTag(siblings[i])) break;
    }

    return false;
  },
  "first-of-type": function firstOfType(elem) {
    var siblings = getSiblings(elem);

    for (var i = 0; i < siblings.length; i++) {
      if (isTag(siblings[i])) {
        if (siblings[i] === elem) return true;
        if (getName(siblings[i]) === getName(elem)) break;
      }
    }

    return false;
  },
  "last-of-type": function lastOfType(elem) {
    var siblings = getSiblings(elem);

    for (var i = siblings.length - 1; i >= 0; i--) {
      if (isTag(siblings[i])) {
        if (siblings[i] === elem) return true;
        if (getName(siblings[i]) === getName(elem)) break;
      }
    }

    return false;
  },
  "only-of-type": function onlyOfType(elem) {
    var siblings = getSiblings(elem);

    for (var i = 0, j = siblings.length; i < j; i++) {
      if (isTag(siblings[i])) {
        if (siblings[i] === elem) continue;
        if (getName(siblings[i]) === getName(elem)) return false;
      }
    }

    return true;
  },
  "only-child": function onlyChild(elem) {
    var siblings = getSiblings(elem);

    for (var i = 0; i < siblings.length; i++) {
      if (isTag(siblings[i]) && siblings[i] !== elem) return false;
    }

    return true;
  },
  link: function link(elem) {
    return hasAttrib(elem, "href");
  },
  visited: falseFunc,
  selected: function selected(elem) {
    if (hasAttrib(elem, "selected")) return true;else if (getName(elem) !== "option") return false;
    var parent = getParent(elem);
    if (!parent || getName(parent) !== "select" || hasAttrib(parent, "multiple")) return false;
    var siblings = getChildren(parent),
        sawElem = false;

    for (var i = 0; i < siblings.length; i++) {
      if (isTag(siblings[i])) {
        if (siblings[i] === elem) {
          sawElem = true;
        } else if (!sawElem) {
          return false;
        } else if (hasAttrib(siblings[i], "selected")) {
          return false;
        }
      }
    }

    return sawElem;
  },
  disabled: function disabled(elem) {
    return hasAttrib(elem, "disabled");
  },
  enabled: function enabled(elem) {
    return !hasAttrib(elem, "disabled");
  },
  checked: function checked(elem) {
    return hasAttrib(elem, "checked") || pseudos.selected(elem);
  },
  required: function required(elem) {
    return hasAttrib(elem, "required");
  },
  optional: function optional(elem) {
    return !hasAttrib(elem, "required");
  },
  parent: function parent(elem) {
    return !pseudos.empty(elem);
  },
  header: function header(elem) {
    var name = getName(elem);
    return name === "h1" || name === "h2" || name === "h3" || name === "h4" || name === "h5" || name === "h6";
  },
  button: function button(elem) {
    var name = getName(elem);
    return name === "button" || name === "input" && getAttribute(elem, "type") === "button";
  },
  input: function input(elem) {
    var name = getName(elem);
    return name === "input" || name === "textarea" || name === "select" || name === "button";
  },
  text: function text(elem) {
    var attr;
    return getName(elem) === "input" && (!(attr = getAttribute(elem, "type")) || attr.toLowerCase() === "text");
  }
};

function verifyArgs(func, name, subselect) {
  if (subselect === null) {
    if (func.length > 1 && name !== "scope") {
      throw new SyntaxError("pseudo-selector :" + name + " requires an argument");
    }
  } else {
    if (func.length === 1) {
      throw new SyntaxError("pseudo-selector :" + name + " doesn't have any arguments");
    }
  }
}

var re_CSS3 = /^(?:(?:nth|last|first|only)-(?:child|of-type)|root|empty|(?:en|dis)abled|checked|not)$/;
module.exports = {
  compile: function compile(next, data, options, context) {
    var name = data.name,
        subselect = data.data;

    if (options && options.strict && !re_CSS3.test(name)) {
      throw SyntaxError(":" + name + " isn't part of CSS3");
    }

    if (typeof filters[name] === "function") {
      verifyArgs(filters[name], name, subselect);
      return filters[name](next, subselect, options, context);
    } else if (typeof pseudos[name] === "function") {
      var func = pseudos[name];
      verifyArgs(func, name, subselect);
      if (next === trueFunc) return func;
      return function pseudoArgs(elem) {
        return func(elem, subselect) && next(elem);
      };
    } else {
      throw new SyntaxError("unmatched pseudo-class :" + name);
    }
  },
  filters: filters,
  pseudos: pseudos
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBzZXVkb3MuanMiXSwibmFtZXMiOlsiRG9tVXRpbHMiLCJyZXF1aXJlIiwiaXNUYWciLCJnZXRUZXh0IiwiZ2V0UGFyZW50IiwiZ2V0Q2hpbGRyZW4iLCJnZXRTaWJsaW5ncyIsImhhc0F0dHJpYiIsImdldE5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGVWYWx1ZSIsImdldE5DaGVjayIsImNoZWNrQXR0cmliIiwicnVsZXMiLCJlcXVhbHMiLCJCYXNlRnVuY3MiLCJ0cnVlRnVuYyIsImZhbHNlRnVuYyIsImdldEZpcnN0RWxlbWVudCIsImVsZW1zIiwiaSIsImxlbmd0aCIsImdldEF0dHJpYkZ1bmMiLCJuYW1lIiwidmFsdWUiLCJkYXRhIiwiYXR0cmliRnVuYyIsIm5leHQiLCJnZXRDaGlsZEZ1bmMiLCJlbGVtIiwiZmlsdGVycyIsImNvbnRhaW5zIiwidGV4dCIsImluZGV4T2YiLCJpY29udGFpbnMiLCJpdGV4dCIsInRvTG93ZXJDYXNlIiwicnVsZSIsImZ1bmMiLCJudGhDaGlsZCIsInNpYmxpbmdzIiwicG9zIiwibnRoTGFzdENoaWxkIiwibnRoT2ZUeXBlIiwibnRoTGFzdE9mVHlwZSIsInJvb3QiLCJzY29wZSIsIm9wdGlvbnMiLCJjb250ZXh0IiwiY2hlY2tib3giLCJmaWxlIiwicGFzc3dvcmQiLCJyYWRpbyIsInJlc2V0IiwiaW1hZ2UiLCJzdWJtaXQiLCJwc2V1ZG9zIiwiZW1wdHkiLCJzb21lIiwidHlwZSIsImoiLCJsaW5rIiwidmlzaXRlZCIsInNlbGVjdGVkIiwicGFyZW50Iiwic2F3RWxlbSIsImRpc2FibGVkIiwiZW5hYmxlZCIsImNoZWNrZWQiLCJyZXF1aXJlZCIsIm9wdGlvbmFsIiwiaGVhZGVyIiwiYnV0dG9uIiwiaW5wdXQiLCJhdHRyIiwidmVyaWZ5QXJncyIsInN1YnNlbGVjdCIsIlN5bnRheEVycm9yIiwicmVfQ1NTMyIsIm1vZHVsZSIsImV4cG9ydHMiLCJjb21waWxlIiwic3RyaWN0IiwidGVzdCIsInBz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Q0osT0FBTyxDQUFDSyxJQUFSLENBQWE1RCxJQUFiLENBQWpDLEVBQW9EO0FBQ25ELFlBQU1zRCxXQUFXLENBQUMsTUFBTXRELElBQU4sR0FBYSxxQkFBZCxDQUFqQjtBQUNBOztBQUVELFFBQUcsT0FBT08sT0FBTyxDQUFDUCxJQUFELENBQWQsS0FBeUIsVUFBNUIsRUFBdUM7QUFDdENvRCxNQUFBQSxVQUFVLENBQUM3QyxPQUFPLENBQUNQLElBQUQsQ0FBUixFQUFnQkEsSUFBaEIsRUFBdUJxRCxTQUF2QixDQUFWO0FBQ0EsYUFBTzlDLE9BQU8sQ0FBQ1AsSUFBRCxDQUFQLENBQWNJLElBQWQsRUFBb0JpRCxTQUFwQixFQUErQjdCLE9BQS9CLEVBQXdDQyxPQUF4QyxDQUFQO0FBQ0EsS0FIRCxNQUdPLElBQUcsT0FBT1EsT0FBTyxDQUFDakMsSUFBRCxDQUFkLEtBQXlCLFVBQTVCLEVBQXVDO0FBQzdDLFVBQUllLElBQUksR0FBR2tCLE9BQU8sQ0FBQ2pDLElBQUQsQ0FBbEI7QUFDQW9ELE1BQUFBLFVBQVUsQ0FBQ3JDLElBQUQsRUFBT2YsSUFBUCxFQUFhcUQsU0FBYixDQUFWO0FBRUEsVUFBR2pELElBQUksS0FBS1gsUUFBWixFQUFzQixPQUFPc0IsSUFBUDtBQUV0QixhQUFPLFNBQVM4QyxVQUFULENBQW9CdkQsSUFBcEIsRUFBeUI7QUFDL0IsZUFBT1MsSUFBSSxDQUFDVCxJQUFELEVBQU8rQyxTQUFQLENBQUosSUFBeUJqRCxJQUFJLENBQUNFLElBQUQsQ0FBcEM7QUFDQSxPQUZEO0FBR0EsS0FUTSxNQVNBO0FBQ04sWUFBTSxJQUFJZ0QsV0FBSixDQUFnQiw2QkFBNkJ0RCxJQUE3QyxDQUFOO0FBQ0E7QUFDRCxHQXhCZTtBQXlCaEJPLEVBQUFBLE9BQU8sRUFBRUEsT0F6Qk87QUEwQmhCMEIsRUFBQUEsT0FBTyxFQUFFQTtBQTFCTyxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5cdHBzZXVkbyBzZWxlY3RvcnNcblxuXHQtLS1cblxuXHR0aGV5IGFyZSBhdmFpbGFibGUgaW4gdHdvIGZvcm1zOlxuXHQqIGZpbHRlcnMgY2FsbGVkIHdoZW4gdGhlIHNlbGVjdG9yXG5cdCAgaXMgY29tcGlsZWQgYW5kIHJldHVybiBhIGZ1bmN0aW9uXG5cdCAgdGhhdCBuZWVkcyB0byByZXR1cm4gbmV4dCgpXG5cdCogcHNldWRvcyBnZXQgY2FsbGVkIG9uIGV4ZWN1dGlvblxuXHQgIHRoZXkgbmVlZCB0byByZXR1cm4gYSBib29sZWFuXG4qL1xuXG52YXIgRG9tVXRpbHMgICAgPSByZXF1aXJlKFwiZG9tdXRpbHNcIiksXG4gICAgaXNUYWcgICAgICAgPSBEb21VdGlscy5pc1RhZyxcbiAgICBnZXRUZXh0ICAgICA9IERvbVV0aWxzLmdldFRleHQsXG4gICAgZ2V0UGFyZW50ICAgPSBEb21VdGlscy5nZXRQYXJlbnQsXG4gICAgZ2V0Q2hpbGRyZW4gPSBEb21VdGlscy5nZXRDaGlsZHJlbixcbiAgICBnZXRTaWJsaW5ncyA9IERvbVV0aWxzLmdldFNpYmxpbmdzLFxuICAgIGhhc0F0dHJpYiAgID0gRG9tVXRpbHMuaGFzQXR0cmliLFxuICAgIGdldE5hbWUgICAgID0gRG9tVXRpbHMuZ2V0TmFtZSxcbiAgICBnZXRBdHRyaWJ1dGU9IERvbVV0aWxzLmdldEF0dHJpYnV0ZVZhbHVlLFxuICAgIGdldE5DaGVjayAgID0gcmVxdWlyZShcIm50aC1jaGVja1wiKSxcbiAgICBjaGVja0F0dHJpYiA9IHJlcXVpcmUoXCIuL2F0dHJpYnV0ZXMuanNcIikucnVsZXMuZXF1YWxzLFxuICAgIEJhc2VGdW5jcyAgID0gcmVxdWlyZShcImJvb2xiYXNlXCIpLFxuICAgIHRydWVGdW5jICAgID0gQmFzZUZ1bmNzLnRydWVGdW5jLFxuICAgIGZhbHNlRnVuYyAgID0gQmFzZUZ1bmNzLmZhbHNlRnVuYztcblxuLy9oZWxwZXIgbWV0aG9kc1xuZnVuY3Rpb24gZ2V0Rmlyc3RFbGVtZW50KGVsZW1zKXtcblx0Zm9yKHZhciBpID0gMDsgZWxlbXMgJiYgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKXtcblx0XHRpZihpc1RhZyhlbGVtc1tpXSkpIHJldHVybiBlbGVtc1tpXTtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRBdHRyaWJGdW5jKG5hbWUsIHZhbHVlKXtcblx0dmFyIGRhdGEgPSB7bmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlfTtcblx0cmV0dXJuIGZ1bmN0aW9uIGF0dHJpYkZ1bmMobmV4dCl7XG5cdFx0cmV0dXJuIGNoZWNrQXR0cmliKG5leHQsIGRhdGEpO1xuXHR9O1xufVxuXG5mdW5jdGlvbiBnZXRDaGlsZEZ1bmMobmV4dCl7XG5cdHJldHVybiBmdW5jdGlvbihlbGVtKXtcblx0XHRyZXR1cm4gISFnZXRQYXJlbnQoZWxlbSkgJiYgbmV4dChlbGVtKTtcblx0fTtcbn1cblxudmFyIGZpbHRlcnMgPSB7XG5cdGNvbnRhaW5zOiBmdW5jdGlvbihuZXh0LCB0ZXh0KXtcblx0XHRyZXR1cm4gZnVuY3Rpb24gY29udGFpbnMoZWxlbSl7XG5cdFx0XHRyZXR1cm4gbmV4dChlbGVtKSAmJiBnZXRUZXh0KGVsZW0pLmluZGV4T2YodGV4dCkgPj0gMDtcblx0XHR9O1xuXHR9LFxuXHRpY29udGFpbnM6IGZ1bmN0aW9uKG5leHQsIHRleHQpe1xuXHRcdHZhciBpdGV4dCA9IHRleHQudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gZnVuY3Rpb24gaWNvbnRhaW5zKGVsZW0pe1xuXHRcdFx0cmV0dXJuIG5leHQoZWxlbSkgJiZcblx0XHRcdFx0Z2V0VGV4dChlbGVtKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoaXRleHQpID49IDA7XG5cdFx0fTtcblx0fSxcblxuXHQvL2xvY2F0aW9uIHNwZWNpZmljIG1ldGhvZHNcblx0XCJudGgtY2hpbGRcIjogZnVuY3Rpb24obmV4dCwgcnVsZSl7XG5cdFx0dmFyIGZ1bmMgPSBnZXROQ2hlY2socnVsZSk7XG5cblx0XHRpZihmdW5jID09PSBmYWxzZUZ1bmMpIHJldHVybiBmdW5jO1xuXHRcdGlmKGZ1bmMgPT09IHRydWVGdW5jKSAgcmV0dXJuIGdldENoaWxkRnVuYyhuZXh0KTtcblxuXHRcdHJldHVybiBmdW5jdGlvbiBudGhDaGlsZChlbGVtKXtcblx0XHRcdHZhciBzaWJsaW5ncyA9IGdldFNpYmxpbmdzKGVsZW0pO1xuXG5cdFx0XHRmb3IodmFyIGkgPSAwLCBwb3MgPSAwOyBpIDwgc2libGluZ3MubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHRpZihpc1RhZyhzaWJsaW5nc1tpXSkpe1xuXHRcdFx0XHRcdGlmKHNpYmxpbmdzW2ldID09PSBlbGVtKSBicmVhaztcblx0XHRcdFx0XHRlbHNlIHBvcysrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmdW5jKHBvcykgJiYgbmV4dChlbGVtKTtcblx0XHR9O1xuXHR9LFxuXHRcIm50aC1sYXN0LWNoaWxkXCI6IGZ1bmN0aW9uKG5leHQsIHJ1bGUpe1xuXHRcdHZhciBmdW5jID0gZ2V0TkNoZWNrKHJ1bGUpO1xuXG5cdFx0aWYoZnVuYyA9PT0gZmFsc2VGdW5jKSByZXR1cm4gZnVuYztcblx0XHRpZihmdW5jID09PSB0cnVlRnVuYykgIHJldHVybiBnZXRDaGlsZEZ1bmMobmV4dCk7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24gbnRoTGFzdENoaWxkKGVsZW0pe1xuXHRcdFx0dmFyIHNpYmxpbmdzID0gZ2V0U2libGluZ3MoZWxlbSk7XG5cblx0XHRcdGZvcih2YXIgcG9zID0gMCwgaSA9IHNpYmxpbmdzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcblx0XHRcdFx0aWYoaXNUYWcoc2libGluZ3NbaV0pKXtcblx0XHRcdFx0XHRpZihzaWJsaW5nc1tpXSA9PT0gZWxlbSkgYnJlYWs7XG5cdFx0XHRcdFx0ZWxzZSBwb3MrKztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZnVuYyhwb3MpICYmIG5leHQoZWxlbSk7XG5cdFx0fTtcblx0fSxcblx0XCJudGgtb2YtdHlwZVwiOiBmdW5jdGlvbihuZXh0LCBydWxlKXtcblx0XHR2YXIgZnVuYyA9IGdldE5DaGVjayhydWxlKTtcblxuXHRcdGlmKGZ1bmMgPT09IGZhbHNlRnVuYykgcmV0dXJuIGZ1bmM7XG5cdFx0aWYoZnVuYyA9PT0gdHJ1ZUZ1bmMpICByZXR1cm4gZ2V0Q2hpbGRGdW5jKG5leHQpO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIG50aE9mVHlwZShlbGVtKXtcblx0XHRcdHZhciBzaWJsaW5ncyA9IGdldFNpYmxpbmdzKGVsZW0pO1xuXG5cdFx0XHRmb3IodmFyIHBvcyA9IDAsIGkgPSAwOyBpIDwgc2libGluZ3MubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHRpZihpc1RhZyhzaWJsaW5nc1tpXSkpe1xuXHRcdFx0XHRcdGlmKHNpYmxpbmdzW2ldID09PSBlbGVtKSBicmVhaztcblx0XHRcdFx0XHRpZihnZXROYW1lKHNpYmxpbmdzW2ldKSA9PT0gZ2V0TmFtZShlbGVtKSkgcG9zKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZ1bmMocG9zKSAmJiBuZXh0KGVsZW0pO1xuXHRcdH07XG5cdH0sXG5cdFwibnRoLWxhc3Qtb2YtdHlwZVwiOiBmdW5jdGlvbihuZXh0LCBydWxlKXtcblx0XHR2YXIgZnVuYyA9IGdldE5DaGVjayhydWxlKTtcblxuXHRcdGlmKGZ1bmMgPT09IGZhbHNlRnVuYykgcmV0dXJuIGZ1bmM7XG5cdFx0aWYoZnVuYyA9PT0gdHJ1ZUZ1bmMpICByZXR1cm4gZ2V0Q2hpbGRGdW5jKG5leHQpO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIG50aExhc3RPZlR5cGUoZWxlbSl7XG5cdFx0XHR2YXIgc2libGluZ3MgPSBnZXRTaWJsaW5ncyhlbGVtKTtcblxuXHRcdFx0Zm9yKHZhciBwb3MgPSAwLCBpID0gc2libGluZ3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuXHRcdFx0XHRpZihpc1RhZyhzaWJsaW5nc1tpXSkpe1xuXHRcdFx0XHRcdGlmKHNpYmxpbmdzW2ldID09PSBlbGVtKSBicmVhaztcblx0XHRcdFx0XHRpZihnZXROYW1lKHNpYmxpbmdzW2ldKSA9PT0gZ2V0TmFtZShlbGVtKSkgcG9zKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZ1bmMocG9zKSAmJiBuZXh0KGVsZW0pO1xuXHRcdH07XG5cdH0sXG5cbiAgICAvL1RPRE8gZGV0ZXJtaW5lIHRoZSBhY3R1YWwgcm9vdCBlbGVtZW50XG4gICAgcm9vdDogZnVuY3Rpb24obmV4dCl7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgICAgIHJldHVybiAhZ2V0UGFyZW50KGVsZW0pICYmIG5leHQoZWxlbSk7XG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIHNjb3BlOiBmdW5jdGlvbihuZXh0LCBydWxlLCBvcHRpb25zLCBjb250ZXh0KXtcbiAgICAgICAgaWYoIWNvbnRleHQgfHwgY29udGV4dC5sZW5ndGggPT09IDApe1xuICAgICAgICAgICAgLy9lcXVpdmFsZW50IHRvIDpyb290XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVycy5yb290KG5leHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoY29udGV4dC5sZW5ndGggPT09IDEpe1xuICAgICAgICAgICAgLy9OT1RFOiBjYW4ndCBiZSB1bnBhY2tlZCwgYXMgOmhhcyB1c2VzIHRoaXMgZm9yIHNpZGUtZWZmZWN0c1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGVsZW0pe1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0WzBdID09PSBlbGVtICYmIG5leHQoZWxlbSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGVsZW0pe1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuaW5kZXhPZihlbGVtKSA+PSAwICYmIG5leHQoZWxlbSk7XG4gICAgICAgIH07XG4gICAgfSxcblxuXHQvL2pRdWVyeSBleHRlbnNpb25zIChvdGhlcnMgZm9sbG93IGFzIHBzZXVkb3MpXG5cdGNoZWNrYm94OiBnZXRBdHRyaWJGdW5jKFwidHlwZVwiLCBcImNoZWNrYm94XCIpLFxuXHRmaWxlOiBnZXRBdHRyaWJGdW5jKFwidHlwZVwiLCBcImZpbGVcIiksXG5cdHBhc3N3b3JkOiBnZXRBdHRyaWJGdW5jKFwidHlwZVwiLCBcInBhc3N3b3JkXCIpLFxuXHRyYWRpbzogZ2V0QXR0cmliRnVuYyhcInR5cGVcIiwgXCJyYWRpb1wiKSxcblx0cmVzZXQ6IGdldEF0dHJpYkZ1bmMoXCJ0eXBlXCIsIFwicmVzZXRcIiksXG5cdGltYWdlOiBnZXRBdHRyaWJGdW5jKFwidHlwZVwiLCBcImltYWdlXCIpLFxuXHRzdWJtaXQ6IGdldEF0dHJpYkZ1bmMoXCJ0eXBlXCIsIFwic3VibWl0XCIpXG59O1xuXG4vL3doaWxlIGZpbHRlcnMgYXJlIHByZWNvbXBpbGVkLCBwc2V1ZG9zIGdldCBjYWxsZWQgd2hlbiB0aGV5IGFyZSBuZWVkZWRcbnZhciBwc2V1ZG9zID0ge1xuXHRlbXB0eTogZnVuY3Rpb24oZWxlbSl7XG5cdFx0cmV0dXJuICFnZXRDaGlsZHJlbihlbGVtKS5zb21lKGZ1bmN0aW9uKGVsZW0pe1xuXHRcdFx0cmV0dXJuIGlzVGFnKGVsZW0pIHx8IGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCI7XG5cdFx0fSk7XG5cdH0sXG5cblx0XCJmaXJzdC1jaGlsZFwiOiBmdW5jdGlvbihlbGVtKXtcblx0XHRyZXR1cm4gZ2V0Rmlyc3RFbGVtZW50KGdldFNpYmxpbmdzKGVsZW0pKSA9PT0gZWxlbTtcblx0fSxcblx0XCJsYXN0LWNoaWxkXCI6IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdHZhciBzaWJsaW5ncyA9IGdldFNpYmxpbmdzKGVsZW0pO1xuXG5cdFx0Zm9yKHZhciBpID0gc2libGluZ3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuXHRcdFx0aWYoc2libGluZ3NbaV0gPT09IGVsZW0pIHJldHVybiB0cnVlO1xuXHRcdFx0aWYoaXNUYWcoc2libGluZ3NbaV0pKSBicmVhaztcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cdFwiZmlyc3Qtb2YtdHlwZVwiOiBmdW5jdGlvbihlbGVtKXtcblx0XHR2YXIgc2libGluZ3MgPSBnZXRTaWJsaW5ncyhlbGVtKTtcblxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzaWJsaW5ncy5sZW5ndGg7IGkrKyl7XG5cdFx0XHRpZihpc1RhZyhzaWJsaW5nc1tpXSkpe1xuXHRcdFx0XHRpZihzaWJsaW5nc1tpXSA9PT0gZWxlbSkgcmV0dXJuIHRydWU7XG5cdFx0XHRcdGlmKGdldE5hbWUoc2libGluZ3NbaV0pID09PSBnZXROYW1lKGVsZW0pKSBicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cdFwibGFzdC1vZi10eXBlXCI6IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdHZhciBzaWJsaW5ncyA9IGdldFNpYmxpbmdzKGVsZW0pO1xuXG5cdFx0Zm9yKHZhciBpID0gc2libGluZ3MubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKXtcblx0XHRcdGlmKGlzVGFnKHNpYmxpbmdzW2ldKSl7XG5cdFx0XHRcdGlmKHNpYmxpbmdzW2ldID09PSBlbGVtKSByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0aWYoZ2V0TmFtZShzaWJsaW5nc1tpXSkgPT09IGdldE5hbWUoZWxlbSkpIGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblx0XCJvbmx5LW9mLXR5cGVcIjogZnVuY3Rpb24oZWxlbSl7XG5cdFx0dmFyIHNpYmxpbmdzID0gZ2V0U2libGluZ3MoZWxlbSk7XG5cblx0XHRmb3IodmFyIGkgPSAwLCBqID0gc2libGluZ3MubGVuZ3RoOyBpIDwgajsgaSsrKXtcblx0XHRcdGlmKGlzVGFnKHNpYmxpbmdzW2ldKSl7XG5cdFx0XHRcdGlmKHNpYmxpbmdzW2ldID09PSBlbGVtKSBjb250aW51ZTtcblx0XHRcdFx0aWYoZ2V0TmFtZShzaWJsaW5nc1tpXSkgPT09IGdldE5hbWUoZWxlbSkpIHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblx0XCJvbmx5LWNoaWxkXCI6IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdHZhciBzaWJsaW5ncyA9IGdldFNpYmxpbmdzKGVsZW0pO1xuXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHNpYmxpbmdzLmxlbmd0aDsgaSsrKXtcblx0XHRcdGlmKGlzVGFnKHNpYmxpbmdzW2ldKSAmJiBzaWJsaW5nc1tpXSAhPT0gZWxlbSkgcmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdC8vOm1hdGNoZXMoYSwgYXJlYSwgbGluaylbaHJlZl1cblx0bGluazogZnVuY3Rpb24oZWxlbSl7XG5cdFx0cmV0dXJuIGhhc0F0dHJpYihlbGVtLCBcImhyZWZcIik7XG5cdH0sXG5cdHZpc2l0ZWQ6IGZhbHNlRnVuYywgLy9zZWVtcyB0byBiZSBhIHZhbGlkIGltcGxlbWVudGF0aW9uXG5cdC8vVE9ETzogOmFueS1saW5rIG9uY2UgdGhlIG5hbWUgaXMgZmluYWxpemVkIChhcyBhbiBhbGlhcyBvZiA6bGluaylcblxuXHQvL2Zvcm1zXG5cdC8vdG8gY29uc2lkZXI6IDp0YXJnZXRcblxuXHQvLzptYXRjaGVzKFtzZWxlY3RlZF0sIHNlbGVjdDpub3QoW211bHRpcGxlXSk6bm90KD4gb3B0aW9uW3NlbGVjdGVkXSkgPiBvcHRpb246Zmlyc3Qtb2YtdHlwZSlcblx0c2VsZWN0ZWQ6IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdGlmKGhhc0F0dHJpYihlbGVtLCBcInNlbGVjdGVkXCIpKSByZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIGlmKGdldE5hbWUoZWxlbSkgIT09IFwib3B0aW9uXCIpIHJldHVybiBmYWxzZTtcblxuXHRcdC8vdGhlIGZpcnN0IDxvcHRpb24+IGluIGEgPHNlbGVjdD4gaXMgYWxzbyBzZWxlY3RlZFxuXHRcdHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoZWxlbSk7XG5cblx0XHRpZihcblx0XHRcdCFwYXJlbnQgfHxcblx0XHRcdGdldE5hbWUocGFyZW50KSAhPT0gXCJzZWxlY3RcIiB8fFxuXHRcdFx0aGFzQXR0cmliKHBhcmVudCwgXCJtdWx0aXBsZVwiKVxuXHRcdCkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0dmFyIHNpYmxpbmdzID0gZ2V0Q2hpbGRyZW4ocGFyZW50KSxcblx0XHRcdHNhd0VsZW0gID0gZmFsc2U7XG5cblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2libGluZ3MubGVuZ3RoOyBpKyspe1xuXHRcdFx0aWYoaXNUYWcoc2libGluZ3NbaV0pKXtcblx0XHRcdFx0aWYoc2libGluZ3NbaV0gPT09IGVsZW0pe1xuXHRcdFx0XHRcdHNhd0VsZW0gPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2UgaWYoIXNhd0VsZW0pe1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fSBlbHNlIGlmKGhhc0F0dHJpYihzaWJsaW5nc1tpXSwgXCJzZWxlY3RlZFwiKSl7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNhd0VsZW07XG5cdH0sXG5cdC8vaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2NyaXB0aW5nLmh0bWwjZGlzYWJsZWQtZWxlbWVudHNcblx0Ly86bWF0Y2hlcyhcblx0Ly8gIDptYXRjaGVzKGJ1dHRvbiwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIG1lbnVpdGVtLCBvcHRncm91cCwgb3B0aW9uKVtkaXNhYmxlZF0sXG5cdC8vICBvcHRncm91cFtkaXNhYmxlZF0gPiBvcHRpb24pLFxuXHQvLyBmaWVsZHNldFtkaXNhYmxlZF0gKiAvL1RPRE8gbm90IGNoaWxkIG9mIGZpcnN0IDxsZWdlbmQ+XG5cdC8vKVxuXHRkaXNhYmxlZDogZnVuY3Rpb24oZWxlbSl7XG5cdFx0cmV0dXJuIGhhc0F0dHJpYihlbGVtLCBcImRpc2FibGVkXCIpO1xuXHR9LFxuXHRlbmFibGVkOiBmdW5jdGlvbihlbGVtKXtcblx0XHRyZXR1cm4gIWhhc0F0dHJpYihlbGVtLCBcImRpc2FibGVkXCIpO1xuXHR9LFxuXHQvLzptYXRjaGVzKDptYXRjaGVzKDpyYWRpbywgOmNoZWNrYm94KVtjaGVja2VkXSwgOnNlbGVjdGVkKSAoVE9ETyBtZW51aXRlbSlcblx0Y2hlY2tlZDogZnVuY3Rpb24oZWxlbSl7XG5cdFx0cmV0dXJuIGhhc0F0dHJpYihlbGVtLCBcImNoZWNrZWRcIikgfHwgcHNldWRvcy5zZWxlY3RlZChlbGVtKTtcblx0fSxcblx0Ly86bWF0Y2hlcyhpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSlbcmVxdWlyZWRdXG5cdHJlcXVpcmVkOiBmdW5jdGlvbihlbGVtKXtcblx0XHRyZXR1cm4gaGFzQXR0cmliKGVsZW0sIFwicmVxdWlyZWRcIik7XG5cdH0sXG5cdC8vOm1hdGNoZXMoaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEpOm5vdChbcmVxdWlyZWRdKVxuXHRvcHRpb25hbDogZnVuY3Rpb24oZWxlbSl7XG5cdFx0cmV0dXJuICFoYXNBdHRyaWIoZWxlbSwgXCJyZXF1aXJlZFwiKTtcblx0fSxcblxuXHQvL2pRdWVyeSBleHRlbnNpb25zXG5cblx0Ly86bm90KDplbXB0eSlcblx0cGFyZW50OiBmdW5jdGlvbihlbGVtKXtcblx0XHRyZXR1cm4gIXBzZXVkb3MuZW1wdHkoZWxlbSk7XG5cdH0sXG5cdC8vOm1hdGNoZXMoaDEsIGgyLCBoMywgaDQsIGg1LCBoNilcblx0aGVhZGVyOiBmdW5jdGlvbihlbGVtKXtcblx0XHR2YXIgbmFtZSA9IGdldE5hbWUoZWxlbSk7XG5cdFx0cmV0dXJuIG5hbWUgPT09IFwiaDFcIiB8fFxuXHRcdCAgICAgICBuYW1lID09PSBcImgyXCIgfHxcblx0XHQgICAgICAgbmFtZSA9PT0gXCJoM1wiIHx8XG5cdFx0ICAgICAgIG5hbWUgPT09IFwiaDRcIiB8fFxuXHRcdCAgICAgICBuYW1lID09PSBcImg1XCIgfHxcblx0XHQgICAgICAgbmFtZSA9PT0gXCJoNlwiO1xuXHR9LFxuXG5cdC8vOm1hdGNoZXMoYnV0dG9uLCBpbnB1dFt0eXBlPWJ1dHRvbl0pXG5cdGJ1dHRvbjogZnVuY3Rpb24oZWxlbSl7XG5cdFx0dmFyIG5hbWUgPSBnZXROYW1lKGVsZW0pO1xuXHRcdHJldHVybiBuYW1lID09PSBcImJ1dHRvblwiIHx8XG5cdFx0ICAgICAgIG5hbWUgPT09IFwiaW5wdXRcIiAmJlxuXHRcdCAgICAgICBnZXRBdHRyaWJ1dGUoZWxlbSwgXCJ0eXBlXCIpID09PSBcImJ1dHRvblwiO1xuXHR9LFxuXHQvLzptYXRjaGVzKGlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0LCBidXR0b24pXG5cdGlucHV0OiBmdW5jdGlvbihlbGVtKXtcblx0XHR2YXIgbmFtZSA9IGdldE5hbWUoZWxlbSk7XG5cdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiB8fFxuXHRcdCAgICAgICBuYW1lID09PSBcInRleHRhcmVhXCIgfHxcblx0XHQgICAgICAgbmFtZSA9PT0gXCJzZWxlY3RcIiB8fFxuXHRcdCAgICAgICBuYW1lID09PSBcImJ1dHRvblwiO1xuXHR9LFxuXHQvL2lucHV0Om1hdGNoZXMoOm5vdChbdHlwZSE9JyddKSwgW3R5cGU9J3RleHQnIGldKVxuXHR0ZXh0OiBmdW5jdGlvbihlbGVtKXtcblx0XHR2YXIgYXR0cjtcblx0XHRyZXR1cm4gZ2V0TmFtZShlbGVtKSA9PT0gXCJpbnB1dFwiICYmIChcblx0XHRcdCEoYXR0ciA9IGdldEF0dHJpYnV0ZShlbGVtLCBcInR5cGVcIikpIHx8XG5cdFx0XHRhdHRyLnRvTG93ZXJDYXNlKCkgPT09IFwidGV4dFwiXG5cdFx0KTtcblx0fVxufTtcblxuZnVuY3Rpb24gdmVyaWZ5QXJncyhmdW5jLCBuYW1lLCBzdWJzZWxlY3Qpe1xuXHRpZihzdWJzZWxlY3QgPT09IG51bGwpe1xuXHRcdGlmKGZ1bmMubGVuZ3RoID4gMSAmJiBuYW1lICE9PSBcInNjb3BlXCIpe1xuXHRcdFx0dGhyb3cgbmV3IFN5bnRheEVycm9yKFwicHNldWRvLXNlbGVjdG9yIDpcIiArIG5hbWUgKyBcIiByZXF1aXJlcyBhbiBhcmd1bWVudFwiKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0aWYoZnVuYy5sZW5ndGggPT09IDEpe1xuXHRcdFx0dGhyb3cgbmV3IFN5bnRheEVycm9yKFwicHNldWRvLXNlbGVjdG9yIDpcIiArIG5hbWUgKyBcIiBkb2Vzbid0IGhhdmUgYW55IGFyZ3VtZW50c1wiKTtcblx0XHR9XG5cdH1cbn1cblxuLy9GSVhNRSB0aGlzIGZlZWxzIGhhY2t5XG52YXIgcmVfQ1NTMyA9IC9eKD86KD86bnRofGxhc3R8Zmlyc3R8b25seSktKD86Y2hpbGR8b2YtdHlwZSl8cm9vdHxlbXB0eXwoPzplbnxkaXMpYWJsZWR8Y2hlY2tlZHxub3QpJC87XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRjb21waWxlOiBmdW5jdGlvbihuZXh0LCBkYXRhLCBvcHRpb25zLCBjb250ZXh0KXtcblx0XHR2YXIgbmFtZSA9IGRhdGEubmFtZSxcblx0XHRcdHN1YnNlbGVjdCA9IGRhdGEuZGF0YTtcblxuXHRcdGlmKG9wdGlvbnMgJiYgb3B0aW9ucy5zdHJpY3QgJiYgIXJlX0NTUzMudGVzdChuYW1lKSl7XG5cdFx0XHR0aHJvdyBTeW50YXhFcnJvcihcIjpcIiArIG5hbWUgKyBcIiBpc24ndCBwYXJ0IG9mIENTUzNcIik7XG5cdFx0fVxuXG5cdFx0aWYodHlwZW9mIGZpbHRlcnNbbmFtZV0gPT09IFwiZnVuY3Rpb25cIil7XG5cdFx0XHR2ZXJpZnlBcmdzKGZpbHRlcnNbbmFtZV0sIG5hbWUsICBzdWJzZWxlY3QpO1xuXHRcdFx0cmV0dXJuIGZpbHRlcnNbbmFtZV0obmV4dCwgc3Vic2VsZWN0LCBvcHRpb25zLCBjb250ZXh0KTtcblx0XHR9IGVsc2UgaWYodHlwZW9mIHBzZXVkb3NbbmFtZV0gPT09IFwiZnVuY3Rpb25cIil7XG5cdFx0XHR2YXIgZnVuYyA9IHBzZXVkb3NbbmFtZV07XG5cdFx0XHR2ZXJpZnlBcmdzKGZ1bmMsIG5hbWUsIHN1YnNlbGVjdCk7XG5cblx0XHRcdGlmKG5leHQgPT09IHRydWVGdW5jKSByZXR1cm4gZnVuYztcblxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIHBzZXVkb0FyZ3MoZWxlbSl7XG5cdFx0XHRcdHJldHVybiBmdW5jKGVsZW0sIHN1YnNlbGVjdCkgJiYgbmV4dChlbGVtKTtcblx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IG5ldyBTeW50YXhFcnJvcihcInVubWF0Y2hlZCBwc2V1ZG8tY2xhc3MgOlwiICsgbmFtZSk7XG5cdFx0fVxuXHR9LFxuXHRmaWx0ZXJzOiBmaWx0ZXJzLFxuXHRwc2V1ZG9zOiBwc2V1ZG9zXG59O1xuIl19